{"version":3,"sources":["../../../eosjs-ecc/lib/key_private.js","../../src/link.ts","../../src/link-options.ts","assets/jungle.png","../../../eosjs-ecc/lib/aes.js","../../../eosjs-ecc/lib/signature.js","../../../eosjs-ecc/lib/enforce_types.js","../../src/link-abi-data.ts","assets/eos.png","assets/fio.svg","assets/proton.png","assets/telos.png","assets/wax.png","../../src/errors.ts","../../../eosjs-ecc/lib/api_common.js","../../../eosjs-ecc/lib/promise-async.js","../../../eosjs-ecc/lib/ecdsa.js","../../../eosjs-ecc/lib/ecsignature.js","../../../eosjs-ecc/lib/api_object.js","../../src/utils.ts","../../../eosjs-ecc/lib/index.js","../../src/index.ts","utils/storage.js","Accounts.js","Blockchains.js","Response.js","examples/Sign.js","App.js","serviceWorker.js","index.js","../../../eosjs-ecc/lib/hash.js","../../src/link-session.ts","../../../eosjs-ecc/lib/key_public.js","../../../eosjs-ecc/lib/key_utils.js"],"names":["_interopRequireDefault","require","_toConsumableArray2","_slicedToArray2","_typeof2","ecurve","Point","secp256k1","getCurveByName","BigInteger","assert","hash","PublicKey","keyUtils","createHash","promiseAsync","G","n","PrivateKey","d","fromString","Buffer","isBuffer","fromBuffer","isBigInteger","TypeError","toWif","private_key","toBuffer","concat","checkEncode","public_key","toString","toPublic","Q","multiply","fromPoint","getSharedSecret","KB","toUncompressed","KBP","fromAffine","slice","r","S","affineX","size","sha512","getChildKey","name","update","digest","parseKey","privateStr","equal","match","versionKey","checkDecode","version","readUInt8","privateKey","format","keyType","length","_match","keyString","module","exports","fromHex","hex","buf","Error","fromSeed","seed","sha256","isWif","text","e","isValid","key","fromWif","str","console","log","randomKey","cpuEntropyBits","arguments","undefined","initialize","then","random32ByteBuffer","unsafeRandomKey","Promise","resolve","safe","initialized","pvt","pvtError","pub","doesNotThrow","unitTest","addEntropy","apply","cpuEntropy","entropyCount","cb","msg","error","message","a","randomBytes","ByteBuffer","crypto","Long","crypt","nonce","checksum","toLongObj","ebuf","DEFAULT_CAPACITY","LITTLE_ENDIAN","writeUint64","append","copy","offset","toBinary","encryption_key","iv","check","cbuf","fromBinary","readUint32","toBinaryBuffer","decipher","createDecipheriv","cryptoJsDecrypt","cipher","createCipheriv","cryptoJsEncrypt","uniqueNonce","unique_nonce_entropy","b","Uint8Array","parseInt","_long","fromNumber","Date","now","entropy","shiftLeft","or","encrypt","decrypt","o","isLong","ecdsa","curve","Signature","s","i","verify","data","pubkey","encoding","from","verifyHash","dataSha256","publicKey","recover","recoverHash","i2","recoverPubKey","writeUInt8","signatureCache","verifyHex","toHex","verifyBuffer","recoverPublicKey","recoverPublicKeyFromBuffer","sign","signHash","der","ecsignature","lenR","lenS","toDER","calcPubKeyRecoveryParam","signature","fromStringOrThrow","getName","fn","type","value","Array","isArray","constructor","types","structs","base","fields","actions","ricardian_clauses","error_messages","tables","abi_extensions","reason","this","ecc","seedPrivate","privateToPublic","wif","pubkey_prefix","isValidPublic","isValidPrivate","resultEncoding","func","_len","args","_key","reject","setTimeout","err","enforceType","ECSignature","deterministicGenerateK","checkSig","x","k","v","fill","HmacSHA256","T","signum","compareTo","verifyRaw","c","modInverse","u1","mod","u2","R","multiplyTwo","isInfinity","equals","strictEqual","isYOdd","add","pointFromX","nR","eNeg","negate","rInv","validate","N_OVER_TWO","shiftRight","subtract","rBa","toDERInteger","sBa","sequence","push","unshift","toCompact","compressed","buffer","toScriptSignature","hashType","hashTypeBuffer","parseCompact","fromDER","rLen","sLen","rB","sB","fromDERInteger","parseScriptSignature","hashTypeMod","Aes","key_utils","commonApi","objectApi","Object","assign","LocalSessionStorage","keyPrefix","localStorage","split","removeItem","id","join","link","accountName","permissionName","sessionKey","getItem","recentSessionKey","ref","parsed","JSON","parse","auth","actor","permission","setRecent","LinkSession","restore","recentKey","recentSession","matches","storageType","chainId","setItem","filter","session","serialize","stringify","Debug","props","chain","matchingSessions","sessions","Table","Header","HeaderCell","collapsing","Body","map","isCurrent","Row","Cell","Button","color","content","disabled","onClick","setSession","icon","removeSession","textAlign","colSpan","Footer","fullWidth","basic","fluid","addAccount","primary","Component","logoMap","eosLogo","fioLogo","jungleLogo","protonLogo","telosLogo","waxLogo","options","blockchains","image","avatar","src","Blockchains","Dropdown","onChange","placeholder","search","selection","Transaction","response","Fragment","Segment","style","background","dividing","borderBottom","language","showLineNumbers","theme","monokai","wrapLines","displayDataTypes","displayObjectSize","enableClipboard","iconStyle","payload","marginTop","overflow","signatures","signer","transaction","ExampleSign","init","attached","transact","panes","menuItem","render","Tab","App","state","login","identity","storage","store","scan","setState","establishLink","rpc","find","rpcEndpoints","AnchorLink","protocol","host","port","service","transport","AnchorLinkBrowserTransport","signTransaction","account","authorization","producers","proxy","voter","broadcast","blocksBehind","expireSeconds","result","setChainId","remove","window","location","URLSearchParams","get","prevProps","prevState","Container","paddingTop","block","Subheader","href","padded","Accounts","Response","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","createHmac","sha1","secret","ripemd160","getEncoded","point","decodeFrom","child","cG","Qprime","bin","prefix_match","RegExp","test","substring","fromStringHex","base58","_ref","_ref$cpuEntropyBits","_ref$safe","_entropyCount","hash_array","externalEntropyArray","browserEntropy","ints","_i","_ints","pos","entropyPos","newCheck","decode","keyBuffer","encode","_checksum","collected","lastCount","lowEntropySamples","count","floatingPointCount","delta","Math","abs","bits","floor","log2","pct","Number","toFixed","warn","sin","sqrt","LN2","entropyStr","screen","height","width","colorDepth","availHeight","availWidth","pixelDepth","history","mimeType","mimeTypes","description","suffixes","start_t"],"mappings":"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","file":"static/js/main.5b15e2bd.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar ecurve = require('ecurve');\n\nvar Point = ecurve.Point;\nvar secp256k1 = ecurve.getCurveByName('secp256k1');\n\nvar BigInteger = require('bigi');\n\nvar assert = require('assert');\n\nvar hash = require('./hash');\n\nvar PublicKey = require('./key_public');\n\nvar keyUtils = require('./key_utils');\n\nvar createHash = require('create-hash');\n\nvar promiseAsync = require('./promise-async');\n\nvar G = secp256k1.G;\nvar n = secp256k1.n;\nmodule.exports = PrivateKey;\n/**\n  @typedef {string} wif - https://en.bitcoin.it/wiki/Wallet_import_format\n  @typedef {string} pubkey - EOSKey..\n  @typedef {ecurve.Point} Point\n*/\n\n/**\n  @param {BigInteger} d\n*/\n\nfunction PrivateKey(d) {\n  if (typeof d === 'string') {\n    return PrivateKey.fromString(d);\n  } else if (Buffer.isBuffer(d)) {\n    return PrivateKey.fromBuffer(d);\n  } else if ((0, _typeof2[\"default\"])(d) === 'object' && BigInteger.isBigInteger(d.d)) {\n    return PrivateKey(d.d);\n  }\n\n  if (!BigInteger.isBigInteger(d)) {\n    throw new TypeError('Invalid private key');\n  }\n  /** @return {string} private key like PVT_K1_base58privatekey.. */\n\n\n  function toString() {\n    // todo, use PVT_K1_\n    // return 'PVT_K1_' + keyUtils.checkEncode(toBuffer(), 'K1')\n    return toWif();\n  }\n  /**\n      @return  {wif}\n  */\n\n\n  function toWif() {\n    var private_key = toBuffer(); // checksum includes the version\n\n    private_key = Buffer.concat([new Buffer([0x80]), private_key]);\n    return keyUtils.checkEncode(private_key, 'sha256x2');\n  }\n\n  var public_key;\n  /**\n      @return {Point}\n  */\n\n  function toPublic() {\n    if (public_key) {\n      // cache\n      // S L O W in the browser\n      return public_key;\n    }\n\n    var Q = secp256k1.G.multiply(d);\n    return public_key = PublicKey.fromPoint(Q);\n  }\n\n  function toBuffer() {\n    return d.toBuffer(32);\n  }\n  /**\n    ECIES\n    @arg {string|Object} pubkey wif, PublicKey object\n    @return {Buffer} 64 byte shared secret\n  */\n\n\n  function getSharedSecret(public_key) {\n    public_key = PublicKey(public_key);\n    var KB = public_key.toUncompressed().toBuffer();\n    var KBP = Point.fromAffine(secp256k1, BigInteger.fromBuffer(KB.slice(1, 33)), // x\n    BigInteger.fromBuffer(KB.slice(33, 65)) // y\n    );\n    var r = toBuffer();\n    var P = KBP.multiply(BigInteger.fromBuffer(r));\n    var S = P.affineX.toBuffer({\n      size: 32\n    }); // SHA512 used in ECIES\n\n    return hash.sha512(S);\n  } // /** ECIES TODO unit test\n  //   @arg {string|Object} pubkey wif, PublicKey object\n  //   @return {Buffer} 64 byte shared secret\n  // */\n  // function getSharedSecret(public_key) {\n  //     public_key = PublicKey(public_key).toUncompressed()\n  //     var P = public_key.Q.multiply( d );\n  //     var S = P.affineX.toBuffer({size: 32});\n  //     // ECIES, adds an extra sha512\n  //     return hash.sha512(S);\n  // }\n\n  /**\n    @arg {string} name - child key name.\n    @return {PrivateKey}\n     @example activePrivate = masterPrivate.getChildKey('owner').getChildKey('active')\n    @example activePrivate.getChildKey('mycontract').getChildKey('myperm')\n  */\n\n\n  function getChildKey(name) {\n    // console.error('WARNING: getChildKey untested against eosd'); // no eosd impl yet\n    var index = createHash('sha256').update(toBuffer()).update(name).digest();\n    return PrivateKey(index);\n  }\n\n  function toHex() {\n    return toBuffer().toString('hex');\n  }\n\n  return {\n    d: d,\n    toWif: toWif,\n    toString: toString,\n    toPublic: toPublic,\n    toBuffer: toBuffer,\n    getSharedSecret: getSharedSecret,\n    getChildKey: getChildKey\n  };\n}\n/** @private */\n\n\nfunction parseKey(privateStr) {\n  assert.equal((0, _typeof2[\"default\"])(privateStr), 'string', 'privateStr');\n  var match = privateStr.match(/^PVT_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);\n\n  if (match === null) {\n    // legacy WIF - checksum includes the version\n    var versionKey = keyUtils.checkDecode(privateStr, 'sha256x2');\n    var version = versionKey.readUInt8(0);\n    assert.equal(0x80, version, \"Expected version \".concat(0x80, \", instead got \", version));\n\n    var _privateKey = PrivateKey.fromBuffer(versionKey.slice(1));\n\n    var _keyType = 'K1';\n    var format = 'WIF';\n    return {\n      privateKey: _privateKey,\n      format: format,\n      keyType: _keyType\n    };\n  }\n\n  assert(match.length === 3, 'Expecting private key like: PVT_K1_base58privateKey..');\n\n  var _match = (0, _slicedToArray2[\"default\"])(match, 3),\n      keyType = _match[1],\n      keyString = _match[2];\n\n  assert.equal(keyType, 'K1', 'K1 private key expected');\n  var privateKey = PrivateKey.fromBuffer(keyUtils.checkDecode(keyString, keyType));\n  return {\n    privateKey: privateKey,\n    format: 'PVT',\n    keyType: keyType\n  };\n}\n\nPrivateKey.fromHex = function (hex) {\n  return PrivateKey.fromBuffer(new Buffer(hex, 'hex'));\n};\n\nPrivateKey.fromBuffer = function (buf) {\n  if (!Buffer.isBuffer(buf)) {\n    throw new Error(\"Expecting parameter to be a Buffer type\");\n  }\n\n  if (buf.length === 33 && buf[32] === 1) {\n    // remove compression flag\n    buf = buf.slice(0, -1);\n  }\n\n  if (32 !== buf.length) {\n    throw new Error(\"Expecting 32 bytes, instead got \".concat(buf.length));\n  }\n\n  return PrivateKey(BigInteger.fromBuffer(buf));\n};\n/**\n    @arg {string} seed - any length string.  This is private, the same seed\n    produces the same private key every time.\n\n    @return {PrivateKey}\n*/\n\n\nPrivateKey.fromSeed = function (seed) {\n  // generate_private_key\n  if (!(typeof seed === 'string')) {\n    throw new Error('seed must be of type string');\n  }\n\n  return PrivateKey.fromBuffer(hash.sha256(seed));\n};\n/**\n  @arg {wif} key\n  @return {boolean} true if key is in the Wallet Import Format\n*/\n\n\nPrivateKey.isWif = function (text) {\n  try {\n    assert(parseKey(text).format === 'WIF');\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n/**\n  @arg {wif|Buffer|PrivateKey} key\n  @return {boolean} true if key is convertable to a private key object.\n*/\n\n\nPrivateKey.isValid = function (key) {\n  try {\n    PrivateKey(key);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n/** @deprecated */\n\n\nPrivateKey.fromWif = function (str) {\n  console.log('PrivateKey.fromWif is deprecated, please use PrivateKey.fromString');\n  return PrivateKey.fromString(str);\n};\n/**\n    @throws {AssertError|Error} parsing key\n    @arg {string} privateStr Eosio or Wallet Import Format (wif) -- a secret\n*/\n\n\nPrivateKey.fromString = function (privateStr) {\n  return parseKey(privateStr).privateKey;\n};\n/**\n  Create a new random private key.\n\n  Call initialize() first to run some self-checking code and gather some CPU\n  entropy.\n\n  @arg {number} [cpuEntropyBits = 0] - additional CPU entropy, this already\n  happens once so it should not be needed again.\n\n  @return {Promise<PrivateKey>} - random private key\n*/\n\n\nPrivateKey.randomKey = function () {\n  var cpuEntropyBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return PrivateKey.initialize().then(function () {\n    return PrivateKey.fromBuffer(keyUtils.random32ByteBuffer({\n      cpuEntropyBits: cpuEntropyBits\n    }));\n  });\n};\n/**\n  @return {Promise<PrivateKey>} for testing, does not require initialize().\n*/\n\n\nPrivateKey.unsafeRandomKey = function () {\n  return Promise.resolve(PrivateKey.fromBuffer(keyUtils.random32ByteBuffer({\n    safe: false\n  })));\n};\n\nvar initialized = false,\n    unitTested = false;\n/**\n  Run self-checking code and gather CPU entropy.\n\n  Initialization happens once even if called multiple times.\n\n  @return {Promise}\n*/\n\nfunction initialize() {\n  if (initialized) {\n    return;\n  }\n\n  unitTest();\n  keyUtils.addEntropy.apply(keyUtils, (0, _toConsumableArray2[\"default\"])(keyUtils.cpuEntropy()));\n  assert(keyUtils.entropyCount() >= 128, 'insufficient entropy');\n  initialized = true;\n}\n\nPrivateKey.initialize = promiseAsync(initialize);\n/**\n  Unit test basic private and public key functionality.\n\n  @throws {AssertError}\n*/\n\nfunction unitTest() {\n  var pvt = PrivateKey(hash.sha256(''));\n  var pvtError = 'key comparison test failed on a known private key';\n  assert.equal(pvt.toWif(), '5KYZdUEo39z3FPrtuX2QbbwGnNP5zTd7yyr2SC1j299sBCnWjss', pvtError);\n  assert.equal(pvt.toString(), '5KYZdUEo39z3FPrtuX2QbbwGnNP5zTd7yyr2SC1j299sBCnWjss', pvtError); // assert.equal(pvt.toString(), 'PVT_K1_2jH3nnhxhR3zPUcsKaWWZC9ZmZAnKm3GAnFD1xynGJE1Znuvjd', pvtError)\n\n  var pub = pvt.toPublic();\n  var pubError = 'pubkey string comparison test failed on a known public key';\n  assert.equal(pub.toString(), 'EOS859gxfnXyUriMgUeThh1fWv3oqcpLFyHa3TfFYC4PK2HqhToVM', pubError); // assert.equal(pub.toString(), 'PUB_K1_859gxfnXyUriMgUeThh1fWv3oqcpLFyHa3TfFYC4PK2Ht7beeX', pubError)\n  // assert.equal(pub.toStringLegacy(), 'EOS859gxfnXyUriMgUeThh1fWv3oqcpLFyHa3TfFYC4PK2HqhToVM', pubError)\n\n  doesNotThrow(function () {\n    return PrivateKey.fromString(pvt.toWif());\n  }, 'converting known wif from string');\n  doesNotThrow(function () {\n    return PrivateKey.fromString(pvt.toString());\n  }, 'converting known pvt from string');\n  doesNotThrow(function () {\n    return PublicKey.fromString(pub.toString());\n  }, 'converting known public key from string'); // doesNotThrow(() => PublicKey.fromString(pub.toStringLegacy()), 'converting known public key from string')\n\n  unitTested = true;\n}\n/** @private */\n\n\nvar doesNotThrow = function doesNotThrow(cb, msg) {\n  try {\n    cb();\n  } catch (error) {\n    error.message = \"\".concat(msg, \" ==> \").concat(error.message);\n    throw error;\n  }\n};","import * as esr from 'eosio-signing-request';\nimport { JsonRpc } from 'eosjs';\nimport * as ecc from 'eosjs-ecc';\nimport makeFetch from 'fetch-ponyfill';\nimport WebSocket from 'isomorphic-ws';\nimport zlib from 'pako';\nimport { v4 as uuid } from 'uuid';\nimport { CancelError, IdentityError } from './errors';\nimport { defaults } from './link-options';\nimport { LinkChannelSession, LinkFallbackSession, LinkSession, } from './link-session';\nimport { abiEncode, normalizePublicKey, publicKeyEqual, generatePrivateKey } from './utils';\n/** @internal */\nconst fetch = makeFetch().fetch;\n/**\n * Main class, also exposed as the default export of the library.\n *\n * Example:\n *\n * ```ts\n * import AnchorLink from 'anchor-link'\n * import ConsoleTransport from 'anchor-link-console-transport'\n *\n * const link = new AnchorLink({\n *     transport: new ConsoleTransport()\n * })\n *\n * const result = await link.transact({actions: myActions, broadcast: true})\n * ```\n */\nexport class Link {\n    /** Create a new link instance. */\n    constructor(options) {\n        this.abiCache = new Map();\n        if (typeof options !== 'object') {\n            throw new TypeError('Missing options object');\n        }\n        if (!options.transport) {\n            throw new TypeError('options.transport is required, see https://github.com/greymass/anchor-link#transports');\n        }\n        if (options.rpc === undefined || typeof options.rpc === 'string') {\n            this.rpc = new JsonRpc(options.rpc || defaults.rpc, { fetch: fetch });\n        }\n        else {\n            this.rpc = options.rpc;\n        }\n        this.chainId = options.chainId || defaults.chainId;\n        this.serviceAddress = (options.service || defaults.service).trim().replace(/\\/$/, '');\n        this.transport = options.transport;\n        this.requestOptions = {\n            abiProvider: this,\n            textDecoder: options.textDecoder || new TextDecoder(),\n            textEncoder: options.textEncoder || new TextEncoder(),\n            zlib,\n        };\n    }\n    /**\n     * Fetch the ABI for given account, cached.\n     * @internal\n     */\n    async getAbi(account) {\n        let rv = this.abiCache.get(account);\n        if (!rv) {\n            rv = (await this.rpc.get_abi(account)).abi;\n            if (rv) {\n                this.abiCache.set(account, rv);\n            }\n        }\n        return rv;\n    }\n    /**\n     * Create a new unique buoy callback url.\n     * @internal\n     */\n    createCallbackUrl() {\n        return `${this.serviceAddress}/${uuid()}`;\n    }\n    /**\n     * Create a SigningRequest instance configured for this link.\n     * @internal\n     */\n    async createRequest(args) {\n        // generate unique callback url\n        const request = await esr.SigningRequest.create({\n            ...args,\n            chainId: this.chainId,\n            broadcast: false,\n            callback: {\n                url: this.createCallbackUrl(),\n                background: true,\n            },\n        }, this.requestOptions);\n        return request;\n    }\n    /**\n     * Send a SigningRequest instance using this link.\n     * @internal\n     */\n    async sendRequest(request, transport, broadcast = false) {\n        const t = transport || this.transport;\n        try {\n            const linkUrl = request.data.callback;\n            if (!linkUrl.startsWith(this.serviceAddress)) {\n                throw new Error('Request must have a link callback');\n            }\n            if (request.data.flags !== 2) {\n                throw new Error('Invalid request flags');\n            }\n            // wait for callback or user cancel\n            const ctx = {};\n            const socket = waitForCallback(linkUrl, ctx);\n            const cancel = new Promise((resolve, reject) => {\n                t.onRequest(request, (reason) => {\n                    if (ctx.cancel) {\n                        ctx.cancel();\n                    }\n                    if (typeof reason === 'string') {\n                        reject(new CancelError(reason));\n                    }\n                    else {\n                        reject(reason);\n                    }\n                });\n            });\n            const payload = await Promise.race([socket, cancel]);\n            const signer = {\n                actor: payload.sa,\n                permission: payload.sp,\n            };\n            const signatures = Object.keys(payload)\n                .filter((key) => key.startsWith('sig') && key !== 'sig0')\n                .map((key) => payload[key]);\n            // recreate transaction from request response\n            const resolved = await esr.ResolvedSigningRequest.fromPayload(payload, this.requestOptions);\n            const { serializedTransaction, transaction } = resolved;\n            const result = {\n                request: resolved.request,\n                serializedTransaction,\n                transaction,\n                signatures,\n                payload,\n                signer,\n            };\n            if (broadcast) {\n                const res = await this.rpc.push_transaction({\n                    signatures: result.signatures,\n                    serializedTransaction: result.serializedTransaction,\n                });\n                result.processed = res.processed;\n            }\n            if (t.onSuccess) {\n                t.onSuccess(request, result);\n            }\n            return result;\n        }\n        catch (error) {\n            if (t.onFailure) {\n                t.onFailure(request, error);\n            }\n            throw error;\n        }\n    }\n    /**\n     * Sign and optionally broadcast a EOSIO transaction, action or actions.\n     *\n     * Example:\n     *\n     * ```ts\n     * let result = await myLink.transact({transaction: myTx})\n     * ```\n     *\n     * @param args The transact arguments.\n     * @param transport Transport override, for internal use.\n     */\n    async transact(args, transport) {\n        const t = transport || this.transport;\n        const broadcast = args.broadcast || false;\n        const request = await this.createRequest(args);\n        console.log(request);\n        const result = await this.sendRequest(request, t, broadcast);\n        console.log(request);\n        return result;\n    }\n    /**\n     * Send an identity request and verify the identity proof.\n     * @param requestPermission Optional request permission if the request is for a specific account or permission.\n     * @param info Metadata to add to the request.\n     * @note This is for advanced use-cases, you probably want to use [[Link.login]] instead.\n     */\n    async identify(requestPermission, info) {\n        const request = await this.createRequest({\n            identity: { permission: requestPermission || null },\n            info,\n        });\n        const res = await this.sendRequest(request);\n        if (!res.request.isIdentity()) {\n            throw new IdentityError(`Unexpected response`);\n        }\n        const message = Buffer.concat([\n            Buffer.from(request.getChainId(), 'hex'),\n            Buffer.from(res.serializedTransaction),\n            Buffer.alloc(32),\n        ]);\n        const { signer } = res;\n        const signerKey = ecc.recover(res.signatures[0], message);\n        const account = await this.rpc.get_account(signer.actor);\n        if (!account) {\n            throw new IdentityError(`Signature from unknown account: ${signer.actor}`);\n        }\n        const permission = account.permissions.find(({ perm_name }) => perm_name === signer.permission);\n        if (!permission) {\n            throw new IdentityError(`${signer.actor} signed for unknown permission: ${signer.permission}`);\n        }\n        const auth = permission.required_auth;\n        const keyAuth = auth.keys.find(({ key }) => publicKeyEqual(key, signerKey));\n        if (!keyAuth) {\n            throw new IdentityError(`${formatAuth(signer)} has no key matching id signature`);\n        }\n        if (auth.threshold > keyAuth.weight) {\n            throw new IdentityError(`${formatAuth(signer)} signature does not reach auth threshold`);\n        }\n        if (requestPermission) {\n            if ((requestPermission.actor !== esr.PlaceholderName &&\n                requestPermission.actor !== signer.actor) ||\n                (requestPermission.permission !== esr.PlaceholderPermission &&\n                    requestPermission.permission !== signer.permission)) {\n                throw new IdentityError(`Unexpected identity proof from ${formatAuth(signer)}, expected ${formatAuth(requestPermission)} `);\n            }\n        }\n        return {\n            ...res,\n            account,\n            signerKey,\n        };\n    }\n    /**\n     * Login and create a persistent session.\n     * @param identifier The session identifier, an EOSIO name (`[a-z1-5]{1,12}`).\n     *                   Should be set to the contract account if applicable.\n     */\n    async login(identifier) {\n        const privateKey = await generatePrivateKey();\n        const requestKey = ecc.privateToPublic(privateKey);\n        const createInfo = {\n            session_name: identifier,\n            request_key: requestKey,\n        };\n        const res = await this.identify(undefined, {\n            link: abiEncode(createInfo, 'link_create'),\n        });\n        const metadata = { sameDevice: res.request.getRawInfo()['return_path'] !== undefined };\n        let session;\n        if (res.payload.link_ch && res.payload.link_key && res.payload.link_name) {\n            session = new LinkChannelSession(this, {\n                auth: res.signer,\n                publicKey: res.signerKey,\n                channel: {\n                    url: res.payload.link_ch,\n                    key: res.payload.link_key,\n                    name: res.payload.link_name,\n                },\n                requestKey: privateKey,\n            }, metadata);\n        }\n        else {\n            session = new LinkFallbackSession(this, {\n                auth: res.signer,\n                publicKey: res.signerKey,\n            }, metadata);\n        }\n        return {\n            ...res,\n            session,\n        };\n    }\n    /**\n     * Restore previous session, see [[Link.login]] to create a new session.\n     *\n     * Example:\n     *\n     * ```ts\n     * let session = await myLink.login('mycontract')\n     * let data = session.serialize()\n     * // a little longer than a few moments later...\n     * let restored = myLink.restore(data)\n     * let result = await restored.transact({action: myAction})\n     * ```\n     *\n     * @param data The serialized session data obtained by calling [[LinkSession.serialize]].\n     **/\n    restoreSession(data) {\n        return LinkSession.restore(this, data);\n    }\n    /**\n     * Create an eosjs compatible signature provider using this link.\n     * @param availableKeys Keys the created provider will claim to be able to sign for.\n     * @param transport (internal) Transport override for this call.\n     * @note We don't know what keys are available so those have to be provided,\n     *       to avoid this use [[LinkSession.makeSignatureProvider]] instead. Sessions can be created with [[Link.login]].\n     */\n    makeSignatureProvider(availableKeys, transport) {\n        return {\n            getAvailableKeys: async () => availableKeys,\n            sign: async (args) => {\n                const request = esr.SigningRequest.fromTransaction(args.chainId, args.serializedTransaction, this.requestOptions);\n                request.setCallback(this.createCallbackUrl(), true);\n                request.setBroadcast(false);\n                const { signatures } = await this.sendRequest(request, transport);\n                return {\n                    ...args,\n                    signatures,\n                };\n            },\n        };\n    }\n    /**\n     * Create an eosjs authority provider using this link.\n     * @note Uses the configured RPC Node's `/v1/chain/get_required_keys` API to resolve keys.\n     */\n    makeAuthorityProvider() {\n        const { rpc } = this;\n        return {\n            async getRequiredKeys(args) {\n                const { availableKeys, transaction } = args;\n                const result = await rpc.fetch('/v1/chain/get_required_keys', {\n                    transaction,\n                    available_keys: availableKeys.map(normalizePublicKey),\n                });\n                return result.required_keys.map(normalizePublicKey);\n            },\n        };\n    }\n}\n/**\n * Connect to a WebSocket channel wait for a message.\n * @internal\n */\nfunction waitForCallback(url, ctx) {\n    return new Promise((resolve, reject) => {\n        let active = true;\n        let retries = 0;\n        const socketUrl = url.replace(/^http/, 'ws');\n        const handleResponse = (response) => {\n            try {\n                resolve(JSON.parse(response));\n            }\n            catch (error) {\n                error.message = 'Unable to parse callback JSON: ' + error.message;\n                reject(error);\n            }\n        };\n        const connect = () => {\n            const socket = new WebSocket(socketUrl);\n            ctx.cancel = () => {\n                active = false;\n                if (socket.readyState === WebSocket.OPEN ||\n                    socket.readyState === WebSocket.CONNECTING) {\n                    socket.close();\n                }\n            };\n            socket.onmessage = (event) => {\n                active = false;\n                if (socket.readyState === WebSocket.OPEN) {\n                    socket.close();\n                }\n                if (typeof Blob !== 'undefined' && event.data instanceof Blob) {\n                    const reader = new FileReader();\n                    reader.onload = () => {\n                        handleResponse(reader.result);\n                    };\n                    reader.onerror = (error) => {\n                        reject(error);\n                    };\n                    reader.readAsText(event.data);\n                }\n                else {\n                    if (typeof event.data === 'string') {\n                        handleResponse(event.data);\n                    }\n                    else {\n                        handleResponse(event.data.toString());\n                    }\n                }\n            };\n            socket.onopen = () => {\n                retries = 0;\n            };\n            socket.onerror = (error) => { };\n            socket.onclose = (close) => {\n                if (active) {\n                    setTimeout(connect, backoff(retries++));\n                }\n            };\n        };\n        connect();\n    });\n}\n/**\n * Exponential backoff function that caps off at 10s after 10 tries.\n * https://i.imgur.com/IrUDcJp.png\n * @internal\n */\nfunction backoff(tries) {\n    return Math.min(Math.pow(tries * 10, 2), 10 * 1000);\n}\n/**\n * Format a EOSIO permission level in the format `actor@permission` taking placeholders into consideration.\n * @internal\n */\nfunction formatAuth(auth) {\n    let { actor, permission } = auth;\n    if (actor === esr.PlaceholderName) {\n        actor = '<any>';\n    }\n    if (permission === esr.PlaceholderName || permission === esr.PlaceholderPermission) {\n        permission = '<any>';\n    }\n    return `${actor}@${permission}`;\n}\n//# sourceMappingURL=link.js.map","/** @internal */\nexport const defaults = {\n    chainId: 'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906',\n    rpc: 'https://eos.greymass.com',\n    service: 'https://cb.anchor.link',\n};\n//# sourceMappingURL=link-options.js.map","module.exports = __webpack_public_path__ + \"static/media/jungle.3f2409df.png\";","\"use strict\";\n\nvar randomBytes = require('randombytes');\n\nvar ByteBuffer = require('bytebuffer');\n\nvar crypto = require('browserify-aes');\n\nvar assert = require('assert');\n\nvar PublicKey = require('./key_public');\n\nvar PrivateKey = require('./key_private');\n\nvar hash = require('./hash');\n\nvar Long = ByteBuffer.Long;\nmodule.exports = {\n  encrypt: encrypt,\n  decrypt: decrypt\n};\n/**\n    Spec: http://localhost:3002/steem/@dantheman/how-to-encrypt-a-memo-when-transferring-steem\n\n    @throws {Error|TypeError} - \"Invalid Key, ...\"\n\n    @arg {PrivateKey} private_key - required and used for decryption\n    @arg {PublicKey} public_key - required and used to calcualte the shared secret\n    @arg {string} [nonce = uniqueNonce()] - assigned a random unique uint64\n\n    @return {object}\n    @property {string} nonce - random or unique uint64, provides entropy when re-using the same private/public keys.\n    @property {Buffer} message - Plain text message\n    @property {number} checksum - shared secret checksum\n*/\n\nfunction encrypt(private_key, public_key, message) {\n  var nonce = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : uniqueNonce();\n  return crypt(private_key, public_key, nonce, message);\n}\n/**\n    Spec: http://localhost:3002/steem/@dantheman/how-to-encrypt-a-memo-when-transferring-steem\n\n    @arg {PrivateKey} private_key - required and used for decryption\n    @arg {PublicKey} public_key - required and used to calcualte the shared secret\n    @arg {string} nonce - random or unique uint64, provides entropy when re-using the same private/public keys.\n    @arg {Buffer} message - Encrypted or plain text message\n    @arg {number} checksum - shared secret checksum\n\n    @throws {Error|TypeError} - \"Invalid Key, ...\"\n\n    @return {Buffer} - message\n*/\n\n\nfunction decrypt(private_key, public_key, nonce, message, checksum) {\n  return crypt(private_key, public_key, nonce, message, checksum).message;\n}\n/**\n    @arg {Buffer} message - Encrypted or plain text message (see checksum)\n    @arg {number} checksum - shared secret checksum (null to encrypt, non-null to decrypt)\n    @private\n*/\n\n\nfunction crypt(private_key, public_key, nonce, message, checksum) {\n  private_key = PrivateKey(private_key);\n  if (!private_key) throw new TypeError('private_key is required');\n  public_key = PublicKey(public_key);\n  if (!public_key) throw new TypeError('public_key is required');\n  nonce = toLongObj(nonce);\n  if (!nonce) throw new TypeError('nonce is required');\n\n  if (!Buffer.isBuffer(message)) {\n    if (typeof message !== 'string') throw new TypeError('message should be buffer or string');\n    message = new Buffer(message, 'binary');\n  }\n\n  if (checksum && typeof checksum !== 'number') throw new TypeError('checksum should be a number');\n  var S = private_key.getSharedSecret(public_key);\n  var ebuf = new ByteBuffer(ByteBuffer.DEFAULT_CAPACITY, ByteBuffer.LITTLE_ENDIAN);\n  ebuf.writeUint64(nonce);\n  ebuf.append(S.toString('binary'), 'binary');\n  ebuf = new Buffer(ebuf.copy(0, ebuf.offset).toBinary(), 'binary');\n  var encryption_key = hash.sha512(ebuf); // D E B U G\n  // console.log('crypt', {\n  //     priv_to_pub: private_key.toPublic().toString(),\n  //     pub: public_key.toString(),\n  //     nonce: nonce.toString(),\n  //     message: message.length,\n  //     checksum,\n  //     S: S.toString('hex'),\n  //     encryption_key: encryption_key.toString('hex'),\n  // })\n\n  var iv = encryption_key.slice(32, 48);\n  var key = encryption_key.slice(0, 32); // check is first 64 bit of sha256 hash treated as uint64_t truncated to 32 bits.\n\n  var check = hash.sha256(encryption_key);\n  check = check.slice(0, 4);\n  var cbuf = ByteBuffer.fromBinary(check.toString('binary'), ByteBuffer.DEFAULT_CAPACITY, ByteBuffer.LITTLE_ENDIAN);\n  check = cbuf.readUint32();\n\n  if (checksum) {\n    if (check !== checksum) throw new Error('Invalid key');\n    message = cryptoJsDecrypt(message, key, iv);\n  } else {\n    message = cryptoJsEncrypt(message, key, iv);\n  }\n\n  return {\n    nonce: nonce,\n    message: message,\n    checksum: check\n  };\n}\n/** This method does not use a checksum, the returned data must be validated some other way.\n\n    @arg {string|Buffer} message - ciphertext binary format\n    @arg {string<utf8>|Buffer} key - 256bit\n    @arg {string<utf8>|Buffer} iv - 128bit\n\n    @return {Buffer}\n*/\n\n\nfunction cryptoJsDecrypt(message, key, iv) {\n  assert(message, \"Missing cipher text\");\n  message = toBinaryBuffer(message);\n  var decipher = crypto.createDecipheriv('aes-256-cbc', key, iv); // decipher.setAutoPadding(true)\n\n  message = Buffer.concat([decipher.update(message), decipher[\"final\"]()]);\n  return message;\n}\n/** This method does not use a checksum, the returned data must be validated some other way.\n    @arg {string|Buffer} message - plaintext binary format\n    @arg {string<utf8>|Buffer} key - 256bit\n    @arg {string<utf8>|Buffer} iv - 128bit\n\n    @return {Buffer}\n*/\n\n\nfunction cryptoJsEncrypt(message, key, iv) {\n  assert(message, \"Missing plain text\");\n  message = toBinaryBuffer(message);\n  var cipher = crypto.createCipheriv('aes-256-cbc', key, iv); // cipher.setAutoPadding(true)\n\n  message = Buffer.concat([cipher.update(message), cipher[\"final\"]()]);\n  return message;\n}\n/** @return {string} unique 64 bit unsigned number string.  Being time based, this is careful to never choose the same nonce twice.  This value could be recorded in the blockchain for a long time.\n*/\n\n\nfunction uniqueNonce() {\n  if (unique_nonce_entropy === null) {\n    var b = new Uint8Array(randomBytes(2));\n    unique_nonce_entropy = parseInt(b[0] << 8 | b[1], 10);\n  }\n\n  var _long = Long.fromNumber(Date.now());\n\n  var entropy = ++unique_nonce_entropy % 0xFFFF; // console.log('uniqueNonce date\\t', ByteBuffer.allocate(8).writeUint64(long).toHex(0))\n  // console.log('uniqueNonce entropy\\t', ByteBuffer.allocate(8).writeUint64(Long.fromNumber(entropy)).toHex(0))\n\n  _long = _long.shiftLeft(16).or(Long.fromNumber(entropy)); // console.log('uniqueNonce final\\t', ByteBuffer.allocate(8).writeUint64(long).toHex(0))\n\n  return _long.toString();\n}\n\nvar unique_nonce_entropy = null; // for(let i=1; i < 10; i++) key.uniqueNonce()\n\nvar toLongObj = function toLongObj(o) {\n  return o ? Long.isLong(o) ? o : Long.fromString(o) : o;\n};\n\nvar toBinaryBuffer = function toBinaryBuffer(o) {\n  return o ? Buffer.isBuffer(o) ? o : new Buffer(o, 'binary') : o;\n};","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar ecdsa = require('./ecdsa');\n\nvar hash = require('./hash');\n\nvar curve = require('ecurve').getCurveByName('secp256k1');\n\nvar assert = require('assert');\n\nvar BigInteger = require('bigi');\n\nvar keyUtils = require('./key_utils');\n\nvar PublicKey = require('./key_public');\n\nvar PrivateKey = require('./key_private');\n\nmodule.exports = Signature;\n\nfunction Signature(r, s, i) {\n  assert.equal(r != null, true, 'Missing parameter');\n  assert.equal(s != null, true, 'Missing parameter');\n  assert.equal(i != null, true, 'Missing parameter');\n  /**\n      Verify signed data.\n       @arg {String|Buffer} data - full data\n      @arg {pubkey|PublicKey} pubkey - EOSKey..\n      @arg {String} [encoding = 'utf8'] - data encoding (if data is a string)\n       @return {boolean}\n  */\n\n  function verify(data, pubkey) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'utf8';\n\n    if (typeof data === 'string') {\n      data = Buffer.from(data, encoding);\n    }\n\n    assert(Buffer.isBuffer(data), 'data is a required String or Buffer');\n    data = hash.sha256(data);\n    return verifyHash(data, pubkey);\n  }\n  /**\n      Verify a buffer of exactally 32 bytes in size (sha256(text))\n       @arg {String|Buffer} dataSha256 - 32 byte buffer or string\n      @arg {String|PublicKey} pubkey - EOSKey..\n      @arg {String} [encoding = 'hex'] - dataSha256 encoding (if string)\n       @return {boolean}\n  */\n\n\n  function verifyHash(dataSha256, pubkey) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'hex';\n\n    if (typeof dataSha256 === 'string') {\n      dataSha256 = Buffer.from(dataSha256, encoding);\n    }\n\n    if (dataSha256.length !== 32 || !Buffer.isBuffer(dataSha256)) throw new Error(\"dataSha256: 32 bytes required\");\n    var publicKey = PublicKey(pubkey);\n    assert(publicKey, 'pubkey required');\n    return ecdsa.verify(curve, dataSha256, {\n      r: r,\n      s: s\n    }, publicKey.Q);\n  }\n\n  ;\n  /** @deprecated\n       Verify hex data by converting to a buffer then hashing.\n       @return {boolean}\n  */\n\n  function verifyHex(hex, pubkey) {\n    console.log('Deprecated: use verify(data, pubkey, \"hex\")');\n    var buf = Buffer.from(hex, 'hex');\n    return verify(buf, pubkey);\n  }\n\n  ;\n  /**\n      Recover the public key used to create this signature using full data.\n       @arg {String|Buffer} data - full data\n      @arg {String} [encoding = 'utf8'] - data encoding (if string)\n       @return {PublicKey}\n  */\n\n  function recover(data) {\n    var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'utf8';\n\n    if (typeof data === 'string') {\n      data = Buffer.from(data, encoding);\n    }\n\n    console.log(data);\n    assert(Buffer.isBuffer(data), 'data is a required String or Buffer');\n    data = hash.sha256(data);\n    return recoverHash(data);\n  }\n\n  ;\n  /**\n      @arg {String|Buffer} dataSha256 - sha256 hash 32 byte buffer or hex string\n      @arg {String} [encoding = 'hex'] - dataSha256 encoding (if string)\n       @return {PublicKey}\n  */\n\n  function recoverHash(dataSha256) {\n    var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n    if (typeof dataSha256 === 'string') {\n      dataSha256 = Buffer.from(dataSha256, encoding);\n    }\n\n    if (dataSha256.length !== 32 || !Buffer.isBuffer(dataSha256)) {\n      throw new Error(\"dataSha256: 32 byte String or buffer requred\");\n    }\n\n    var e = BigInteger.fromBuffer(dataSha256);\n    var i2 = i;\n    i2 -= 27;\n    i2 = i2 & 3;\n    var Q = ecdsa.recoverPubKey(curve, e, {\n      r: r,\n      s: s,\n      i: i\n    }, i2);\n    return PublicKey.fromPoint(Q);\n  }\n\n  ;\n\n  function toBuffer() {\n    var buf;\n    buf = new Buffer(65);\n    buf.writeUInt8(i, 0);\n    r.toBuffer(32).copy(buf, 1);\n    s.toBuffer(32).copy(buf, 33);\n    return buf;\n  }\n\n  ;\n\n  function toHex() {\n    return toBuffer().toString(\"hex\");\n  }\n\n  ;\n  var signatureCache;\n\n  function toString() {\n    if (signatureCache) {\n      return signatureCache;\n    }\n\n    signatureCache = 'SIG_K1_' + keyUtils.checkEncode(toBuffer(), 'K1');\n    return signatureCache;\n  }\n\n  return {\n    r: r,\n    s: s,\n    i: i,\n    toBuffer: toBuffer,\n    verify: verify,\n    verifyHash: verifyHash,\n    verifyHex: verifyHex,\n    // deprecated\n    recover: recover,\n    recoverHash: recoverHash,\n    toHex: toHex,\n    toString: toString,\n\n    /** @deprecated use verify (same arguments and return) */\n    verifyBuffer: function verifyBuffer() {\n      console.log('Deprecated: use signature.verify instead (same arguments)');\n      return verify.apply(void 0, arguments);\n    },\n\n    /** @deprecated use recover (same arguments and return) */\n    recoverPublicKey: function recoverPublicKey() {\n      console.log('Deprecated: use signature.recover instead (same arguments)');\n      return recover.apply(void 0, arguments);\n    },\n\n    /** @deprecated use recoverHash (same arguments and return) */\n    recoverPublicKeyFromBuffer: function recoverPublicKeyFromBuffer() {\n      console.log('Deprecated: use signature.recoverHash instead (same arguments)');\n      return recoverHash.apply(void 0, arguments);\n    }\n  };\n}\n/**\n    Hash and sign arbitrary data.\n\n    @arg {string|Buffer} data - full data\n    @arg {wif|PrivateKey} privateKey\n    @arg {String} [encoding = 'utf8'] - data encoding (if string)\n\n    @return {Signature}\n*/\n\n\nSignature.sign = function (data, privateKey) {\n  var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'utf8';\n\n  if (typeof data === 'string') {\n    data = Buffer.from(data, encoding);\n  }\n\n  assert(Buffer.isBuffer(data), 'data is a required String or Buffer');\n  data = hash.sha256(data);\n  return Signature.signHash(data, privateKey);\n};\n/**\n    Sign a buffer of exactally 32 bytes in size (sha256(text))\n\n    @arg {string|Buffer} dataSha256 - 32 byte buffer or string\n    @arg {wif|PrivateKey} privateKey\n    @arg {String} [encoding = 'hex'] - dataSha256 encoding (if string)\n\n    @return {Signature}\n*/\n\n\nSignature.signHash = function (dataSha256, privateKey) {\n  var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'hex';\n\n  if (typeof dataSha256 === 'string') {\n    dataSha256 = Buffer.from(dataSha256, encoding);\n  }\n\n  if (dataSha256.length !== 32 || !Buffer.isBuffer(dataSha256)) throw new Error(\"dataSha256: 32 byte buffer requred\");\n  privateKey = PrivateKey(privateKey);\n  assert(privateKey, 'privateKey required');\n  var der, e, ecsignature, i, lenR, lenS, nonce;\n  i = null;\n  nonce = 0;\n  e = BigInteger.fromBuffer(dataSha256);\n\n  while (true) {\n    ecsignature = ecdsa.sign(curve, dataSha256, privateKey.d, nonce++);\n    der = ecsignature.toDER();\n    lenR = der[3];\n    lenS = der[5 + lenR];\n\n    if (lenR === 32 && lenS === 32) {\n      i = ecdsa.calcPubKeyRecoveryParam(curve, e, ecsignature, privateKey.toPublic().Q);\n      i += 4; // compressed\n\n      i += 27; // compact  //  24 or 27 :( forcing odd-y 2nd key candidate)\n\n      break;\n    }\n\n    if (nonce % 10 === 0) {\n      console.log(\"WARN: \" + nonce + \" attempts to find canonical signature\");\n    }\n  }\n\n  return Signature(ecsignature.r, ecsignature.s, i);\n};\n\nSignature.fromBuffer = function (buf) {\n  var i, r, s;\n  assert(Buffer.isBuffer(buf), 'Buffer is required');\n  assert.equal(buf.length, 65, 'Invalid signature length');\n  i = buf.readUInt8(0);\n  assert.equal(i - 27, i - 27 & 7, 'Invalid signature parameter');\n  r = BigInteger.fromBuffer(buf.slice(1, 33));\n  s = BigInteger.fromBuffer(buf.slice(33));\n  return Signature(r, s, i);\n};\n\nSignature.fromHex = function (hex) {\n  return Signature.fromBuffer(Buffer.from(hex, \"hex\"));\n};\n/**\n    @arg {string} signature - like SIG_K1_base58signature..\n    @return {Signature} or `null` (invalid)\n*/\n\n\nSignature.fromString = function (signature) {\n  try {\n    return Signature.fromStringOrThrow(signature);\n  } catch (e) {\n    return null;\n  }\n};\n/**\n    @arg {string} signature - like SIG_K1_base58signature..\n    @throws {Error} invalid\n    @return {Signature}\n*/\n\n\nSignature.fromStringOrThrow = function (signature) {\n  assert.equal((0, _typeof2[\"default\"])(signature), 'string', 'signature');\n  var match = signature.match(/^SIG_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);\n  assert(match != null && match.length === 3, 'Expecting signature like: SIG_K1_base58signature..');\n\n  var _match = (0, _slicedToArray2[\"default\"])(match, 3),\n      keyType = _match[1],\n      keyString = _match[2];\n\n  assert.equal(keyType, 'K1', 'K1 signature expected');\n  return Signature.fromBuffer(keyUtils.checkDecode(keyString, keyType));\n};\n/**\n    @arg {String|Signature} o - hex string\n    @return {Signature}\n*/\n\n\nSignature.from = function (o) {\n  var signature = o ? o.r && o.s && o.i ? o : typeof o === 'string' && o.length === 130 ? Signature.fromHex(o) : typeof o === 'string' && o.length !== 130 ? Signature.fromStringOrThrow(o) : Buffer.isBuffer(o) ? Signature.fromBuffer(o) : null : o;\n  /*null or undefined*/\n\n  if (!signature) {\n    throw new TypeError('signature should be a hex string or buffer');\n  }\n\n  return signature;\n};","\"use strict\";\n\nmodule.exports = function enforce(type, value) {\n  // Copied from https://github.com/bitcoinjs/bitcoinjs-lib\n  switch (type) {\n    case 'Array':\n      {\n        if (Array.isArray(value)) return;\n        break;\n      }\n\n    case 'Boolean':\n      {\n        if (typeof value === 'boolean') return;\n        break;\n      }\n\n    case 'Buffer':\n      {\n        if (Buffer.isBuffer(value)) return;\n        break;\n      }\n\n    case 'Number':\n      {\n        if (typeof value === 'number') return;\n        break;\n      }\n\n    case 'String':\n      {\n        if (typeof value === 'string') return;\n        break;\n      }\n\n    default:\n      {\n        if (getName(value.constructor) === getName(type)) return;\n      }\n  }\n\n  throw new TypeError('Expected ' + (getName(type) || type) + ', got ' + value);\n};\n\nfunction getName(fn) {\n  // Why not fn.name: https://kangax.github.io/compat-table/es6/#function_name_property\n  var match = fn.toString().match(/function (.*?)\\(/);\n  return match ? match[1] : null;\n}","export default {\n    version: 'eosio::abi/1.1',\n    types: [],\n    structs: [\n        {\n            name: 'sealed_message',\n            base: '',\n            fields: [\n                {\n                    name: 'from',\n                    type: 'public_key',\n                },\n                {\n                    name: 'nonce',\n                    type: 'uint64',\n                },\n                {\n                    name: 'ciphertext',\n                    type: 'bytes',\n                },\n                {\n                    name: 'checksum',\n                    type: 'uint32',\n                },\n            ],\n        },\n        {\n            name: 'link_create',\n            base: '',\n            fields: [\n                {\n                    name: 'session_name',\n                    type: 'name',\n                },\n                {\n                    name: 'request_key',\n                    type: 'public_key',\n                },\n            ],\n        },\n        {\n            name: 'link_info',\n            base: '',\n            fields: [\n                {\n                    name: 'expiration',\n                    type: 'time_point_sec',\n                },\n            ],\n        },\n    ],\n    actions: [],\n    ricardian_clauses: [],\n    error_messages: [],\n    tables: [],\n    abi_extensions: [],\n};\n//# sourceMappingURL=link-abi-data.js.map","module.exports = __webpack_public_path__ + \"static/media/eos.b3392955.png\";","module.exports = __webpack_public_path__ + \"static/media/fio.9ae02e71.svg\";","module.exports = __webpack_public_path__ + \"static/media/proton.c090f672.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/wax.f02a31b4.png\";","/**\n * Error that is thrown if a [[LinkTransport]] cancels a request.\n * @internal\n */\nexport class CancelError extends Error {\n    constructor(reason) {\n        super(`User canceled request ${reason ? '(' + reason + ')' : ''}`);\n        this.code = 'E_CANCEL';\n    }\n}\n/**\n * Error that is thrown if an identity request fails to verify.\n * @internal\n */\nexport class IdentityError extends Error {\n    constructor(reason) {\n        super(`Unable to verify identity ${reason ? '(' + reason + ')' : ''}`);\n        this.code = 'E_IDENTITY';\n    }\n}\n/**\n * Error originating from a [[LinkSession]].\n * @internal\n */\nexport class SessionError extends Error {\n    constructor(reason, code) {\n        super(reason);\n        this.code = code;\n    }\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\n\nvar Aes = require(\"./aes\");\n\nvar PrivateKey = require(\"./key_private\");\n\nvar PublicKey = require(\"./key_public\");\n\nvar Signature = require(\"./signature\");\n\nvar key_utils = require(\"./key_utils\");\n\nvar hash = require(\"./hash\");\n/**\n    [Wallet Import Format](https://en.bitcoin.it/wiki/Wallet_import_format)\n    @typedef {string} wif\n*/\n\n/**\n    EOSKey..\n    @typedef {string} pubkey\n*/\n\n/** @namespace */\n\n\nvar ecc = {\n  /**\n    Initialize by running some self-checking code.  This should take a\n    second to gather additional CPU entropy used during private key\n    generation.\n     Initialization happens once even if called multiple times.\n     @return {Promise}\n  */\n  initialize: PrivateKey.initialize,\n\n  /**\n    Does not pause to gather CPU entropy.\n    @return {Promise<PrivateKey>} test key\n  */\n  unsafeRandomKey: function unsafeRandomKey() {\n    return PrivateKey.unsafeRandomKey().then(function (key) {\n      return key.toString();\n    });\n  },\n\n  /**\n      @arg {number} [cpuEntropyBits = 0] gather additional entropy\n      from a CPU mining algorithm.  This will already happen once by\n      default.\n       @return {Promise<wif>}\n       @example\n  ecc.randomKey().then(privateKey => {\n  console.log('Private Key:\\t', privateKey) // wif\n  console.log('Public Key:\\t', ecc.privateToPublic(privateKey)) // EOSkey...\n  })\n  */\n  randomKey: function randomKey(cpuEntropyBits) {\n    return PrivateKey.randomKey(cpuEntropyBits).then(function (key) {\n      return key.toString();\n    });\n  },\n\n  /**\n       @arg {string} seed - any length string.  This is private.  The same\n      seed produces the same private key every time.  At least 128 random\n      bits should be used to produce a good private key.\n      @return {wif}\n       @example ecc.seedPrivate('secret') === wif\n  */\n  seedPrivate: function seedPrivate(seed) {\n    return PrivateKey.fromSeed(seed).toString();\n  },\n\n  /**\n      @arg {wif} wif\n      @arg {string} [pubkey_prefix = 'EOS'] - public key prefix\n       @return {pubkey}\n       @example ecc.privateToPublic(wif) === pubkey\n  */\n  privateToPublic: function privateToPublic(wif) {\n    var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n    return PrivateKey(wif).toPublic().toString(pubkey_prefix);\n  },\n\n  /**\n      @arg {pubkey} pubkey - like EOSKey..\n      @arg {string} [pubkey_prefix = 'EOS']\n       @return {boolean} valid\n       @example ecc.isValidPublic(pubkey) === true\n  */\n  isValidPublic: function isValidPublic(pubkey) {\n    var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n    return PublicKey.isValid(pubkey, pubkey_prefix);\n  },\n\n  /**\n      @arg {wif} wif\n      @return {boolean} valid\n       @example ecc.isValidPrivate(wif) === true\n  */\n  isValidPrivate: function isValidPrivate(wif) {\n    return PrivateKey.isValid(wif);\n  },\n\n  /**\n      Create a signature using data or a hash.\n       @arg {string|Buffer} data\n      @arg {wif|PrivateKey} privateKey\n      @arg {String} [encoding = 'utf8'] - data encoding (if string)\n       @return {string} string signature\n       @example ecc.sign('I am alive', wif)\n  */\n  sign: function sign(data, privateKey) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'utf8';\n\n    if (encoding === true) {\n      throw new TypeError('API changed, use signHash(..) instead');\n    } else {\n      if (encoding === false) {\n        console.log('Warning: ecc.sign hashData parameter was removed');\n      }\n    }\n\n    return Signature.sign(data, privateKey, encoding).toString();\n  },\n\n  /**\n      @arg {String|Buffer} dataSha256 - sha256 hash 32 byte buffer or string\n      @arg {wif|PrivateKey} privateKey\n      @arg {String} [encoding = 'hex'] - dataSha256 encoding (if string)\n       @return {string} string signature\n  */\n  signHash: function signHash(dataSha256, privateKey) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'hex';\n    return Signature.signHash(dataSha256, privateKey, encoding).toString();\n  },\n\n  /**\n      Verify signed data.\n       @arg {string|Buffer} signature - buffer or hex string\n      @arg {string|Buffer} data\n      @arg {pubkey|PublicKey} pubkey\n      @arg {boolean} [hashData = true] - sha256 hash data before verify\n      @return {boolean}\n       @example ecc.verify(signature, 'I am alive', pubkey) === true\n  */\n  verify: function verify(signature, data, pubkey) {\n    var encoding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'utf8';\n\n    if (encoding === true) {\n      throw new TypeError('API changed, use verifyHash(..) instead');\n    } else {\n      if (encoding === false) {\n        console.log('Warning: ecc.verify hashData parameter was removed');\n      }\n    }\n\n    signature = Signature.from(signature);\n    return signature.verify(data, pubkey, encoding);\n  },\n  verifyHash: function verifyHash(signature, dataSha256, pubkey) {\n    var encoding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'hex';\n    signature = Signature.from(signature);\n    return signature.verifyHash(dataSha256, pubkey, encoding);\n  },\n\n  /**\n      Recover the public key used to create the signature.\n       @arg {String|Buffer} signature (EOSbase58sig.., Hex, Buffer)\n      @arg {String|Buffer} data - full data\n      @arg {String} [encoding = 'utf8'] - data encoding (if data is a string)\n       @return {pubkey}\n       @example ecc.recover(signature, 'I am alive') === pubkey\n  */\n  recover: function recover(signature, data) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'utf8';\n\n    if (encoding === true) {\n      throw new TypeError('API changed, use recoverHash(signature, data) instead');\n    } else {\n      if (encoding === false) {\n        console.log('Warning: ecc.recover hashData parameter was removed');\n      }\n    }\n\n    signature = Signature.from(signature);\n    return signature.recover(data, encoding).toString();\n  },\n\n  /**\n      @arg {String|Buffer} signature (EOSbase58sig.., Hex, Buffer)\n      @arg {String|Buffer} dataSha256 - sha256 hash 32 byte buffer or hex string\n      @arg {String} [encoding = 'hex'] - dataSha256 encoding (if dataSha256 is a string)\n       @return {PublicKey}\n  */\n  recoverHash: function recoverHash(signature, dataSha256) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'hex';\n    signature = Signature.from(signature);\n    return signature.recoverHash(dataSha256, encoding).toString();\n  },\n\n  /** @arg {string|Buffer} data - always binary, you may need Buffer.from(data, 'hex')\n      @arg {string} [encoding = 'hex'] - result encoding 'hex', 'binary' or 'base64'\n      @return {string|Buffer} - Buffer when encoding is null, or string\n       @example ecc.sha256('hashme') === '02208b..'\n      @example ecc.sha256(Buffer.from('02208b', 'hex')) === '29a23..'\n  */\n  sha256: function sha256(data) {\n    var resultEncoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n    return hash.sha256(data, resultEncoding);\n  }\n};\nmodule.exports = ecc;","\"use strict\";\n\n/**\n  Convert a synchronous function into a asynchronous one (via setTimeout)\n  wrapping it in a promise.  This does not expect the function to have a\n  callback paramter.\n\n  @arg {function} func - non-callback function\n\n  @example promiseAsync(myfunction)\n*/\nmodule.exports = function (func) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        try {\n          resolve(func.apply(void 0, args));\n        } catch (err) {\n          reject(err);\n        }\n      });\n    });\n  };\n};","\"use strict\";\n\nvar assert = require('assert'); // from github.com/bitcoinjs/bitcoinjs-lib from github.com/cryptocoinjs/ecdsa\n\n\nvar crypto = require('./hash');\n\nvar enforceType = require('./enforce_types');\n\nvar BigInteger = require('bigi');\n\nvar ECSignature = require('./ecsignature'); // https://tools.ietf.org/html/rfc6979#section-3.2\n\n\nfunction deterministicGenerateK(curve, hash, d, checkSig, nonce) {\n  enforceType('Buffer', hash);\n  enforceType(BigInteger, d);\n\n  if (nonce) {\n    hash = crypto.sha256(Buffer.concat([hash, new Buffer(nonce)]));\n  } // sanity check\n\n\n  assert.equal(hash.length, 32, 'Hash must be 256 bit');\n  var x = d.toBuffer(32);\n  var k = new Buffer(32);\n  var v = new Buffer(32); // Step B\n\n  v.fill(1); // Step C\n\n  k.fill(0); // Step D\n\n  k = crypto.HmacSHA256(Buffer.concat([v, new Buffer([0]), x, hash]), k); // Step E\n\n  v = crypto.HmacSHA256(v, k); // Step F\n\n  k = crypto.HmacSHA256(Buffer.concat([v, new Buffer([1]), x, hash]), k); // Step G\n\n  v = crypto.HmacSHA256(v, k); // Step H1/H2a, ignored as tlen === qlen (256 bit)\n  // Step H2b\n\n  v = crypto.HmacSHA256(v, k);\n  var T = BigInteger.fromBuffer(v); // Step H3, repeat until T is within the interval [1, n - 1]\n\n  while (T.signum() <= 0 || T.compareTo(curve.n) >= 0 || !checkSig(T)) {\n    k = crypto.HmacSHA256(Buffer.concat([v, new Buffer([0])]), k);\n    v = crypto.HmacSHA256(v, k); // Step H1/H2a, again, ignored as tlen === qlen (256 bit)\n    // Step H2b again\n\n    v = crypto.HmacSHA256(v, k);\n    T = BigInteger.fromBuffer(v);\n  }\n\n  return T;\n}\n\nfunction sign(curve, hash, d, nonce) {\n  var e = BigInteger.fromBuffer(hash);\n  var n = curve.n;\n  var G = curve.G;\n  var r, s;\n  var k = deterministicGenerateK(curve, hash, d, function (k) {\n    // find canonically valid signature\n    var Q = G.multiply(k);\n    if (curve.isInfinity(Q)) return false;\n    r = Q.affineX.mod(n);\n    if (r.signum() === 0) return false;\n    s = k.modInverse(n).multiply(e.add(d.multiply(r))).mod(n);\n    if (s.signum() === 0) return false;\n    return true;\n  }, nonce);\n  var N_OVER_TWO = n.shiftRight(1); // enforce low S values, see bip62: 'low s values in signatures'\n\n  if (s.compareTo(N_OVER_TWO) > 0) {\n    s = n.subtract(s);\n  }\n\n  return ECSignature(r, s);\n}\n\nfunction verifyRaw(curve, e, signature, Q) {\n  var n = curve.n;\n  var G = curve.G;\n  var r = signature.r;\n  var s = signature.s; // 1.4.1 Enforce r and s are both integers in the interval [1, n  1]\n\n  if (r.signum() <= 0 || r.compareTo(n) >= 0) return false;\n  if (s.signum() <= 0 || s.compareTo(n) >= 0) return false; // c = s^-1 mod n\n\n  var c = s.modInverse(n); // 1.4.4 Compute u1 = es^1 mod n\n  //               u2 = rs^1 mod n\n\n  var u1 = e.multiply(c).mod(n);\n  var u2 = r.multiply(c).mod(n); // 1.4.5 Compute R = (xR, yR) = u1G + u2Q\n\n  var R = G.multiplyTwo(u1, Q, u2); // 1.4.5 (cont.) Enforce R is not at infinity\n\n  if (curve.isInfinity(R)) return false; // 1.4.6 Convert the field element R.x to an integer\n\n  var xR = R.affineX; // 1.4.7 Set v = xR mod n\n\n  var v = xR.mod(n); // 1.4.8 If v = r, output \"valid\", and if v != r, output \"invalid\"\n\n  return v.equals(r);\n}\n\nfunction verify(curve, hash, signature, Q) {\n  // 1.4.2 H = Hash(M), already done by the user\n  // 1.4.3 e = H\n  var e = BigInteger.fromBuffer(hash);\n  return verifyRaw(curve, e, signature, Q);\n}\n/**\n  * Recover a public key from a signature.\n  *\n  * See SEC 1: Elliptic Curve Cryptography, section 4.1.6, \"Public\n  * Key Recovery Operation\".\n  *\n  * http://www.secg.org/download/aid-780/sec1-v2.pdf\n  */\n\n\nfunction recoverPubKey(curve, e, signature, i) {\n  assert.strictEqual(i & 3, i, 'Recovery param is more than two bits');\n  var n = curve.n;\n  var G = curve.G;\n  var r = signature.r;\n  var s = signature.s;\n  assert(r.signum() > 0 && r.compareTo(n) < 0, 'Invalid r value');\n  assert(s.signum() > 0 && s.compareTo(n) < 0, 'Invalid s value'); // A set LSB signifies that the y-coordinate is odd\n\n  var isYOdd = i & 1; // The more significant bit specifies whether we should use the\n  // first or second candidate key.\n\n  var isSecondKey = i >> 1; // 1.1 Let x = r + jn\n\n  var x = isSecondKey ? r.add(n) : r;\n  var R = curve.pointFromX(isYOdd, x); // 1.4 Check that nR is at infinity\n\n  var nR = R.multiply(n);\n  assert(curve.isInfinity(nR), 'nR is not a valid curve point'); // Compute -e from e\n\n  var eNeg = e.negate().mod(n); // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n\n  var rInv = r.modInverse(n);\n  var Q = R.multiplyTwo(s, G, eNeg).multiply(rInv);\n  curve.validate(Q);\n  return Q;\n}\n/**\n  * Calculate pubkey extraction parameter.\n  *\n  * When extracting a pubkey from a signature, we have to\n  * distinguish four different cases. Rather than putting this\n  * burden on the verifier, Bitcoin includes a 2-bit value with the\n  * signature.\n  *\n  * This function simply tries all four cases and returns the value\n  * that resulted in a successful pubkey recovery.\n  */\n\n\nfunction calcPubKeyRecoveryParam(curve, e, signature, Q) {\n  for (var i = 0; i < 4; i++) {\n    var Qprime = recoverPubKey(curve, e, signature, i); // 1.6.2 Verify Q\n\n    if (Qprime.equals(Q)) {\n      return i;\n    }\n  }\n\n  throw new Error('Unable to find valid recovery factor');\n}\n\nmodule.exports = {\n  calcPubKeyRecoveryParam: calcPubKeyRecoveryParam,\n  deterministicGenerateK: deterministicGenerateK,\n  recoverPubKey: recoverPubKey,\n  sign: sign,\n  verify: verify,\n  verifyRaw: verifyRaw\n};","\"use strict\";\n\nvar assert = require('assert'); // from https://github.com/bitcoinjs/bitcoinjs-lib\n\n\nvar enforceType = require('./enforce_types');\n\nvar BigInteger = require('bigi');\n\nfunction ECSignature(r, s) {\n  enforceType(BigInteger, r);\n  enforceType(BigInteger, s);\n\n  function toCompact(i, compressed) {\n    if (compressed) i += 4;\n    i += 27;\n    var buffer = new Buffer(65);\n    buffer.writeUInt8(i, 0);\n    r.toBuffer(32).copy(buffer, 1);\n    s.toBuffer(32).copy(buffer, 33);\n    return buffer;\n  }\n\n  function toDER() {\n    var rBa = r.toDERInteger();\n    var sBa = s.toDERInteger();\n    var sequence = []; // INTEGER\n\n    sequence.push(0x02, rBa.length);\n    sequence = sequence.concat(rBa); // INTEGER\n\n    sequence.push(0x02, sBa.length);\n    sequence = sequence.concat(sBa); // SEQUENCE\n\n    sequence.unshift(0x30, sequence.length);\n    return new Buffer(sequence);\n  }\n\n  function toScriptSignature(hashType) {\n    var hashTypeBuffer = new Buffer(1);\n    hashTypeBuffer.writeUInt8(hashType, 0);\n    return Buffer.concat([toDER(), hashTypeBuffer]);\n  }\n\n  return {\n    r: r,\n    s: s,\n    toCompact: toCompact,\n    toDER: toDER,\n    toScriptSignature: toScriptSignature\n  };\n} // Import operations\n\n\nECSignature.parseCompact = function (buffer) {\n  assert.equal(buffer.length, 65, 'Invalid signature length');\n  var i = buffer.readUInt8(0) - 27; // At most 3 bits\n\n  assert.equal(i, i & 7, 'Invalid signature parameter');\n  var compressed = !!(i & 4); // Recovery param only\n\n  i = i & 3;\n  var r = BigInteger.fromBuffer(buffer.slice(1, 33));\n  var s = BigInteger.fromBuffer(buffer.slice(33));\n  return {\n    compressed: compressed,\n    i: i,\n    signature: ECSignature(r, s)\n  };\n};\n\nECSignature.fromDER = function (buffer) {\n  assert.equal(buffer.readUInt8(0), 0x30, 'Not a DER sequence');\n  assert.equal(buffer.readUInt8(1), buffer.length - 2, 'Invalid sequence length');\n  assert.equal(buffer.readUInt8(2), 0x02, 'Expected a DER integer');\n  var rLen = buffer.readUInt8(3);\n  assert(rLen > 0, 'R length is zero');\n  var offset = 4 + rLen;\n  assert.equal(buffer.readUInt8(offset), 0x02, 'Expected a DER integer (2)');\n  var sLen = buffer.readUInt8(offset + 1);\n  assert(sLen > 0, 'S length is zero');\n  var rB = buffer.slice(4, offset);\n  var sB = buffer.slice(offset + 2);\n  offset += 2 + sLen;\n\n  if (rLen > 1 && rB.readUInt8(0) === 0x00) {\n    assert(rB.readUInt8(1) & 0x80, 'R value excessively padded');\n  }\n\n  if (sLen > 1 && sB.readUInt8(0) === 0x00) {\n    assert(sB.readUInt8(1) & 0x80, 'S value excessively padded');\n  }\n\n  assert.equal(offset, buffer.length, 'Invalid DER encoding');\n  var r = BigInteger.fromDERInteger(rB);\n  var s = BigInteger.fromDERInteger(sB);\n  assert(r.signum() >= 0, 'R value is negative');\n  assert(s.signum() >= 0, 'S value is negative');\n  return ECSignature(r, s);\n}; // FIXME: 0x00, 0x04, 0x80 are SIGHASH_* boundary constants, importing Transaction causes a circular dependency\n\n\nECSignature.parseScriptSignature = function (buffer) {\n  var hashType = buffer.readUInt8(buffer.length - 1);\n  var hashTypeMod = hashType & ~0x80;\n  assert(hashTypeMod > 0x00 && hashTypeMod < 0x04, 'Invalid hashType');\n  return {\n    signature: ECSignature.fromDER(buffer.slice(0, -1)),\n    hashType: hashType\n  };\n};\n\nmodule.exports = ECSignature;","\"use strict\";\n\nvar Aes = require(\"./aes\");\n\nvar PrivateKey = require(\"./key_private\");\n\nvar PublicKey = require(\"./key_public\");\n\nvar Signature = require(\"./signature\");\n\nvar key_utils = require(\"./key_utils\");\n\nmodule.exports = {\n  Aes: Aes,\n  PrivateKey: PrivateKey,\n  PublicKey: PublicKey,\n  Signature: Signature,\n  key_utils: key_utils\n};","import { Numeric, Serialize } from 'eosjs';\nimport * as ecc from 'eosjs-ecc';\nimport linkAbi from './link-abi-data';\n/** @internal */\nconst types = Serialize.getTypesFromAbi(Serialize.createInitialTypes(), linkAbi);\n/**\n * Helper to ABI encode value.\n * @internal\n */\nexport function abiEncode(value, typeName) {\n    let type = types.get(typeName);\n    if (!type) {\n        throw new Error(`No such type: ${typeName}`);\n    }\n    let buf = new Serialize.SerialBuffer();\n    type.serialize(buf, value);\n    return buf.asUint8Array();\n}\n/**\n * Helper to ABI decode data.\n * @internal\n */\nexport function abiDecode(data, typeName) {\n    let type = types.get(typeName);\n    if (!type) {\n        throw new Error(`No such type: ${typeName}`);\n    }\n    if (typeof data === 'string') {\n        data = Serialize.hexToUint8Array(data);\n    }\n    else if (!(data instanceof Uint8Array)) {\n        data = new Uint8Array(data);\n    }\n    let buf = new Serialize.SerialBuffer({\n        array: data,\n    });\n    return type.deserialize(buf);\n}\n/**\n * Encrypt a message using AES and shared secret derived from given keys.\n * @internal\n */\nexport function sealMessage(message, privateKey, publicKey) {\n    const res = ecc.Aes.encrypt(privateKey, publicKey, message);\n    const data = {\n        from: ecc.privateToPublic(privateKey),\n        nonce: res.nonce.toString(),\n        ciphertext: res.message,\n        checksum: res.checksum,\n    };\n    return abiEncode(data, 'sealed_message');\n}\n/**\n * Ensure public key is in new PUB_ format.\n * @internal\n */\nexport function normalizePublicKey(key) {\n    if (key.startsWith('PUB_')) {\n        return key;\n    }\n    return Numeric.publicKeyToString(Numeric.stringToPublicKey('EOS' + key.substr(-50)));\n}\n/**\n * Return true if given public keys are equal.\n * @internal\n */\nexport function publicKeyEqual(keyA, keyB) {\n    return normalizePublicKey(keyA) === normalizePublicKey(keyB);\n}\n/**\n * Generate a random private key.\n * Uses browser crypto if available, otherwise falls back to slow eosjs-ecc.\n * @internal\n */\nexport async function generatePrivateKey() {\n    if (window && window.crypto) {\n        const data = new Uint32Array(32);\n        window.crypto.getRandomValues(data);\n        return ecc.PrivateKey.fromBuffer(Buffer.from(data)).toString();\n    }\n    else {\n        return await ecc.randomKey();\n    }\n}\n//# sourceMappingURL=utils.js.map","\"use strict\";\n\nvar commonApi = require('./api_common');\n\nvar objectApi = require('./api_object');\n\nvar ecc = Object.assign({}, commonApi, objectApi);\nmodule.exports = ecc;","export * from './link';\nexport * from './link-session';\nexport * from './errors';\n// default export is Link class for convenience\nimport { Link } from './link';\nexport default Link;\n// convenience re-exports from esr\nexport { PlaceholderAuth, PlaceholderName, PlaceholderPermission } from 'eosio-signing-request';\n//# sourceMappingURL=index.js.map","import AnchorLink, { LinkSession } from 'anchor-link'\n\ninterface SessionStorage {\n  clear(): Promise<void>;\n  restore(\n    link: AnchorLink,\n    id: string,\n    accountName?: string,\n    permissionName?: string\n  ): LinkSession | null;\n  remove(\n    id: string,\n    accountName?: string,\n    permissionName?: string\n  ): Promise<void>;\n  store(\n    session: LinkSession,\n    id: string,\n    accountName?: string,\n    permissionName?: string\n  ): Promise<void>;\n}\n\nexport default class LocalSessionStorage implements SessionStorage {\n  constructor(keyPrefix: string = 'anchorlink') {\n    this.keyPrefix = keyPrefix;\n  }\n\n  clear() {\n    for (var i = 0; i < localStorage.length; i++){\n      const key = localStorage.key(i);\n      const [ keyPrefix ] = key.split('-');\n      if (keyPrefix === this.keyPrefix) {\n        localStorage.removeItem(key);\n      }\n    }\n  }\n\n  recentSessionKey(id: string) {\n    return [this.keyPrefix, 'recent', id].join('-');\n  }\n\n  restore(link: AnchorLink, id: string, accountName?: string, permissionName?: string) {\n    let data;\n    // If an accountName and permissionName are provided, load the session specific to it\n    if (accountName && permissionName) {\n      const key = this.sessionKey(id, accountName, permissionName);\n      data = localStorage.getItem(key);\n    } else {\n      // If no accountName or permissionName, load the most recently restored session\n      const key = this.recentSessionKey(id);\n      const ref = localStorage.getItem(key);\n      if (ref) {\n        data = localStorage.getItem(ref);\n      }\n    }\n    // If a session was found in localStorage, parse and restore it\n    if (data) {\n      // Convert the stored JSON to an object\n      const parsed = JSON.parse(data)\n      // Retrieve the actor/permission from this session\n      const { actor, permission } = parsed.data.auth;\n      // Set the restored session as the most recently used\n      this.setRecent(id, actor, permission);\n      // Return the session\n      return LinkSession.restore(link, parsed);\n    }\n    return null;\n  }\n\n  async remove(id: string, accountName?: string, permissionName?: string) {\n    // Remove this specific key from local storage\n    const sessionKey = this.sessionKey(id, accountName, permissionName);\n    localStorage.removeItem(sessionKey);\n    // Determine if the removed account was the last used, and if so, remove that too\n    const recentKey = this.recentSessionKey(id);\n    const recentSession = localStorage.getItem(recentKey);\n    if (sessionKey === recentSession) {\n      localStorage.removeItem(recentKey);\n    }\n  }\n\n  scan() {\n    const matches = [];\n    for (var i = 0; i < localStorage.length; i++){\n      const key = localStorage.key(i);\n      const [ , storageType, chainId, accountName, permissionName ] = key.split('-');\n      if (storageType === 'session') {\n        matches.push({\n          accountName,\n          chainId,\n          key,\n          permissionName,\n        })\n      }\n    }\n    return matches;\n  }\n\n  async setRecent(id: string, accountName?: string, permissionName?: string) {\n    const key = this.sessionKey(id, accountName, permissionName);\n    const recentKey = this.recentSessionKey(id);\n    localStorage.setItem(recentKey, key);\n  }\n\n  sessionKey(id: string, accountName?: string, permissionName?: string) {\n    return [this.keyPrefix, 'session', id, accountName, permissionName]\n      .filter(v => typeof v === 'string' && v.length > 0)\n      .join('-');\n  }\n\n  async store(session: LinkSession, id: string, accountName?: string, permissionName?: string) {\n    const key = this.sessionKey(id, accountName, permissionName);\n    const data = session.serialize();\n    localStorage.setItem(key, JSON.stringify(data));\n    const recentKey = this.recentSessionKey(id);\n    localStorage.setItem(recentKey, key);\n  }\n\n}\n","import React, { Component } from 'react'\nimport { Button, Table } from 'semantic-ui-react';\n\nclass Debug extends Component {\n  render() {\n    const { chain, session, sessions } = this.props;\n    const matchingSessions = sessions.filter(s => s.chainId === chain.chainId)\n    return (\n      <Table>\n        <Table.Header>\n          <Table.HeaderCell collapsing>{chain.name}</Table.HeaderCell>\n          <Table.HeaderCell>Account</Table.HeaderCell>\n          <Table.HeaderCell>Permission</Table.HeaderCell>\n          <Table.HeaderCell />\n        </Table.Header>\n        {(matchingSessions.length)\n          ? (\n            <Table.Body>\n              {matchingSessions.map((s) => {\n                const isCurrent = (session && s.accountName === session.auth.actor && s.permissionName === session.auth.permission)\n                return (\n                  <Table.Row>\n                    <Table.Cell collapsing>\n                      <Button\n                        color={isCurrent ? undefined : \"green\"}\n                        content={isCurrent ? \"In Use\" : \"Use Account\"}\n                        disabled={isCurrent}\n                        onClick={this.props.setSession}\n                        chainId={s.chainId}\n                        accountName={s.accountName}\n                        permissionName={s.permissionName}\n                      />\n                    </Table.Cell>\n                    <Table.Cell>{s.accountName}</Table.Cell>\n                    <Table.Cell>{s.permissionName}</Table.Cell>\n                    <Table.Cell collapsing>\n                      <Button\n                        color=\"red\"\n                        icon=\"trash\"\n                        onClick={this.props.removeSession}\n                        chainId={s.chainId}\n                        accountName={s.accountName}\n                        permissionName={s.permissionName}\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                );\n              })}\n            </Table.Body>\n          )\n          : (\n            <Table.Body>\n              <Table.Row textAlign=\"center\">\n                <Table.Cell colSpan=\"4\">No Accounts Imported</Table.Cell>\n              </Table.Row>\n            </Table.Body>\n          )\n        }\n        <Table.Footer fullWidth>\n          <Table.Row>\n            <Table.HeaderCell />\n            <Table.HeaderCell colSpan=\"4\" textAlign=\"center\">\n              <Button\n                basic\n                content=\"Add Account\"\n                fluid\n                onClick={this.props.addAccount}\n                primary\n              />\n            </Table.HeaderCell>\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n    );\n  }\n}\n\nexport default Debug;\n","import React, { Component } from 'react'\nimport { Dropdown } from 'semantic-ui-react';\n\nimport eosLogo from './assets/eos.png';\nimport fioLogo from './assets/fio.svg';\nimport jungleLogo from './assets/jungle.png';\nimport protonLogo from './assets/proton.png';\nimport telosLogo from './assets/telos.png';\nimport waxLogo from './assets/wax.png';\n\nimport blockchains from './assets/blockchains.json';\n\nconst logoMap = {\n  \"0db13ab9b321c37c0ba8481cb4681c2788b622c3abfd1f12f0e5353d44ba6e72\": eosLogo,\n  \"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e\": fioLogo,\n  \"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473\": jungleLogo,\n  \"2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840\": jungleLogo,\n  \"71ee83bcf52142d61019d95f9cc5427ba6a0d7ff8accd9e2088ae2abeaf3d3dd\": protonLogo,\n  \"1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f\": telosLogo,\n  \"f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12\": waxLogo,\n};\n\nconst options = blockchains.map((chain) => ({\n  key: chain.chainId,\n  text: chain.name,\n  value: chain.chainId,\n  image: {\n    avatar: true,\n    src: logoMap[chain.chainId]\n  },\n}));\n\n\nclass Blockchains extends Component {\n  render() {\n    const { chain } = this.props;\n    return (\n      <Dropdown\n        fluid\n        onChange={this.props.onChange}\n        options={options}\n        placeholder='Select Blockchain...'\n        search\n        selection\n        value={chain.chainId}\n      />\n    );\n  }\n}\n\nexport default Blockchains;\n","import React, { Component } from 'react'\nimport { Header, Segment } from 'semantic-ui-react';\nimport ReactJson from 'react-json-view';\nimport { CodeBlock, monokai } from 'react-code-blocks'\n\n\nclass Transaction extends Component {\n  render() {\n    const { response } = this.props;\n    return (\n      <React.Fragment>\n        <Segment style={{ background: 'rgb(39, 40, 34)' }}>\n          <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n            Callback Payload\n          </Header>\n          <CodeBlock\n            text={`console.log(response.payload);`}\n            language={\"javascript\"}\n            showLineNumbers={false}\n            theme={monokai}\n            wrapLines\n          />\n          <ReactJson\n            displayDataTypes={false}\n            displayObjectSize={false}\n            enableClipboard={false}\n            iconStyle=\"square\"\n            name={null}\n            src={response.payload}\n            style={{\n              background: 'rgb(39, 40, 34)',\n              marginTop: '1em',\n              overflow: 'scroll',\n            }}\n            theme=\"harmonic\"\n          />\n        </Segment>\n        <Segment style={{ background: 'rgb(39, 40, 34)' }}>\n          <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n            Signatures\n          </Header>\n          <CodeBlock\n            text={`console.log(response.signatures);`}\n            language={\"javascript\"}\n            showLineNumbers={false}\n            theme={monokai}\n            wrapLines\n          />\n          <ReactJson\n            displayDataTypes={false}\n            displayObjectSize={false}\n            enableClipboard={false}\n            iconStyle=\"square\"\n            name={null}\n            src={response.signatures}\n            style={{\n              background: 'rgb(39, 40, 34)',\n              marginTop: '1em',\n              overflow: 'scroll',\n            }}\n            theme=\"harmonic\"\n          />\n        </Segment>\n        <Segment style={{ background: 'rgb(39, 40, 34)' }}>\n          <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n            Signer\n          </Header>\n          <CodeBlock\n            text={`console.log(response.signer);`}\n            language={\"javascript\"}\n            showLineNumbers={false}\n            theme={monokai}\n            wrapLines\n          />\n          <ReactJson\n            displayDataTypes={false}\n            displayObjectSize={false}\n            enableClipboard={false}\n            iconStyle=\"square\"\n            name={null}\n            src={response.signer}\n            style={{\n              background: 'rgb(39, 40, 34)',\n              marginTop: '1em',\n              overflow: 'scroll',\n            }}\n            theme=\"harmonic\"\n          />\n        </Segment>\n        <Segment style={{ background: 'rgb(39, 40, 34)' }}>\n          <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n            Transaction\n          </Header>\n          <CodeBlock\n            text={`console.log(response.transaction);`}\n            language={\"javascript\"}\n            showLineNumbers={false}\n            theme={monokai}\n            wrapLines\n          />\n          <ReactJson\n            displayDataTypes={false}\n            displayObjectSize={false}\n            enableClipboard={false}\n            iconStyle=\"square\"\n            name={null}\n            src={response.transaction}\n            style={{\n              background: 'rgb(39, 40, 34)',\n              marginTop: '1em',\n              overflow: 'scroll',\n            }}\n            theme=\"harmonic\"\n          />\n        </Segment>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Transaction;\n","import React, { Component } from 'react'\nimport { CodeBlock, monokai } from 'react-code-blocks'\nimport { Header, Segment, Tab } from 'semantic-ui-react'\n\nconst exampleInit = `import AnchorLink from 'anchor-link'\nimport AnchorLinkBrowserTransport from 'anchor-link-browser-transport'\n\nasync function login(chainId) {\n      const link = new AnchorLink({\n            chainId,\n            rpc: 'https://api.domain.com',\n            transport: new AnchorLinkBrowserTransport(),\n      })\n      const identity = await link.login('anchor-link-demo-multipass', { chainId })\n      const { session } = identity\n      return session\n}`;\n\nconst exampleTransact = `const response = await session.transact({\n      actions: [\n            {\n                  account: 'eosio',\n                  name: 'voteproducer',\n                  authorization: [session.auth],\n                  data: {\n                        producers: [],\n                        proxy: 'greymassvote',\n                        voter: session.auth.actor\n                  }\n            }\n      ],\n      broadcast: false,\n      blocksBehind: 3,\n      expireSeconds: 120,\n});\n`;\n\nexport default class ExampleSign extends Component {\n  render() {\n    const init = (\n      <Segment attached style={{ background: 'rgb(39, 40, 34)' }}>\n        <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n          Example: Initialize anchor-link\n        </Header>\n        <CodeBlock\n          text={exampleInit}\n          language={\"javascript\"}\n          showLineNumbers={false}\n          theme={monokai}\n          wrapLines\n        />\n      </Segment>\n    )\n    const transact = (\n      <Segment attached style={{ background: 'rgb(39, 40, 34)' }}>\n        <Header dividing size=\"large\" style={{ borderBottom: '1px solid white', color: 'white' }}>\n          Example: Issuing Transaction\n        </Header>\n        <CodeBlock\n          text={exampleTransact}\n          language={\"javascript\"}\n          showLineNumbers={false}\n          theme={monokai}\n          wrapLines\n        />\n      </Segment>\n    )\n    const panes = [\n      { menuItem: 'Initialize', render: () => init },\n      { menuItem: 'Transact', render: () => transact },\n    ]\n    return <Tab panes={panes} />\n  }\n}\n","// React and UI components for demo\nimport React, { Component } from 'react'\nimport { Button, Container, Header, Segment } from 'semantic-ui-react'\n\n// The required anchor-link includes\nimport AnchorLink from 'anchor-link'\nimport AnchorLinkBrowserTransport from 'anchor-link-browser-transport'\n\n// Optional code to manage localStorage for sessions and persistence\nimport LocalSessionStorage from './utils/storage'\n\n// React components for this demo, not required\nimport { find } from 'lodash'\nimport blockchains from './assets/blockchains.json'\nimport Accounts from './Accounts.js'\nimport Blockchains from './Blockchains.js'\nimport Response from './Response.js'\nimport ExampleSign from './examples/Sign'\n\nclass App extends Component {\n  // App initialization code\n  constructor(props) {\n    super(props)\n    // Add the ability to retrieve the chainId from the URL\n    const search = window.location.search\n    const params = new URLSearchParams(search)\n    const chainId = params.get('chainId') || '0db13ab9b321c37c0ba8481cb4681c2788b622c3abfd1f12f0e5353d44ba6e72'\n    // Establish storage for sessions in localstorage\n    this.storage = new LocalSessionStorage()\n    // Load any existing sessions\n    const sessions = this.storage.scan()\n    // Set application state\n    this.state = {\n      response: undefined,\n      session: undefined,\n      sessions,\n      chainId,\n    }\n  }\n  componentDidMount() {\n    // Configure anchor-link when this component mounts\n    this.establishLink()\n  }\n  componentDidUpdate(prevProps, prevState) {\n    // If the chainId changes in state, reconfigure anchor-link for that chain\n    if (this.state.chainId !== prevState.chainId) {\n      this.establishLink()\n    }\n  }\n  addAccount = async () => {\n    const { chainId } = this.state\n    try {\n      // Use the anchor-link login method with the chain id to establish a session\n      const identity = await this.link.login('anchor-link-demo-multipass', { chainId })\n      // Retrieve the returned actor and permission used to login\n      const { actor, permission } = identity.signer\n      // Save this session within our storage engine associated to the chainId/actor/permission\n      await this.storage.store(identity.session, chainId, actor, permission)\n      // Update list of all sessions\n      const sessions = this.storage.scan()\n      // Update state with the current session and all available sessions\n      this.setState({\n        session: identity.session,\n        sessions,\n      })\n    } catch(e) {\n      console.log(e)\n    }\n  }\n  establishLink = () => {\n    const { chainId } = this.state\n    // Find the blockchain and retrieve the appropriate API endpoint\n    const blockchain = find(blockchains, { chainId })\n    const rpc = blockchain.rpcEndpoints[0]\n    // Establish the anchor-link instance\n    this.link = new AnchorLink({\n      // Specify the target chainId\n      chainId,\n      // Set the API to use\n      rpc: `${rpc.protocol}://${rpc.host}:${rpc.port}`,\n      // Optional: Set the callback service, which will default to https://cb.anchor.link\n      service: 'https://cb.anchor.link',\n      // Pass in the browser transport\n      transport: new AnchorLinkBrowserTransport(),\n    })\n    // Detect last used session for this chain\n    const session = this.storage.restore(this.link, chainId)\n    // Save current chainId and session into application state\n    this.setState({\n      chainId,\n      session,\n    })\n  }\n  signTransaction = async () => {\n    // Retrieve current session from state\n    const { session } = this.state\n    try {\n      // Reset our response state to clear any previous transaction data\n      this.setState({ response: undefined })\n      // Call transact on the session\n      const result = await session.transact({\n        actions: [\n          {\n            account: 'eosio',\n            name: 'voteproducer',\n            authorization: [session.auth],\n            data: {\n              producers: [],\n              proxy: 'greymassvote',\n              voter: session.auth.actor\n            }\n          }\n        ],\n        // Optional: Whether anchor-link should broadcast this transaction\n        //    For this demo, anchor-link will not broadcast the transaction after receiving it\n        broadcast: false,\n        // Optional: TAPOS values\n        blocksBehind: 3,\n        expireSeconds: 120,\n      })\n      // Update application state with the results of the transaction\n      this.setState({ response: result })\n    } catch(e) {\n      console.log(e)\n    }\n  }\n  // React State Helper to update chainId while switching blockchains\n  setChainId = (e, { value }) => this.setState({\n    chainId: value,\n    response: undefined,\n  })\n  // React State Helper to update sessions while switching accounts\n  setSession = (e, { chainId, accountName, permissionName }) => {\n    // Restore a specific session based on chainId, accountName, and permissionName\n    const session = this.storage.restore(this.link, chainId, accountName, permissionName)\n    // Update application state with new session and reset response data\n    this.setState({\n      response: undefined,\n      session,\n    })\n  }\n  // React State Helper to remove/delete a session\n  removeSession = (e, { chainId, accountName, permissionName }) => {\n    // Remove from local storage based on chainId, accountName, and permissionName\n    this.storage.remove(chainId, accountName, permissionName)\n    // Remove from local application state\n    const { sessions } = this.state\n    this.setState({\n      sessions: sessions.filter(s => !(s.chainId === chainId && s.accountName === accountName && s.permissionName === permissionName))\n    })\n  }\n  render() {\n    // Load state for rendering\n    const {\n      chainId,\n      session,\n      sessions,\n      response,\n    } = this.state\n    // Find the blockchain information (rpc, name, etc) for UI purposes\n    const chain = find(blockchains, { chainId })\n    // Return the UI\n    return (\n      <Container\n        style={{ paddingTop: '2em' }}\n      >\n        <Header attached=\"top\" block size=\"huge\">\n          anchor-link-demo-multipass\n          <Header.Subheader>\n            <p>An anchor-link demo that allows multiple persistent logins from different blockchains and accounts.</p>\n            <p>Source code: <a href=\"https://github.com/greymass/anchor-link-demo-multipass\">https://github.com/greymass/anchor-link-demo-multipass</a></p>\n          </Header.Subheader>\n        </Header>\n        <Segment attached padded>\n          <p>Switch to a specific blockchain.</p>\n          <Blockchains\n            chain={chain}\n            onChange={this.setChainId}\n          />\n        </Segment>\n        <Segment attached padded>\n          <Header>Available Accounts</Header>\n          <Accounts\n            addAccount={this.addAccount}\n            chain={chain}\n            session={session}\n            sessions={sessions}\n            setSession={this.setSession}\n            removeSession={this.removeSession}\n          />\n        </Segment>\n        <Segment attached padded>\n          <Header>Transact with anchor-link</Header>\n          <Button\n            content=\"Sign Test Transaction\"\n            icon=\"external\"\n            onClick={this.signTransaction}\n            primary\n            size=\"huge\"\n          />\n        </Segment>\n        <Segment attached=\"bottom\" padded>\n          <Header>Sample Code</Header>\n          <ExampleSign />\n          {(response)\n            ? (\n              <Response\n                response={response}\n              />\n            )\n            : false\n          }\n        </Segment>\n      </Container>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nvar createHash = require('create-hash');\n\nvar createHmac = require('create-hmac');\n/** @namespace hash */\n\n/** @arg {string|Buffer} data\n    @arg {string} [resultEncoding = null] - 'hex', 'binary' or 'base64'\n    @return {string|Buffer} - Buffer when resultEncoding is null, or string\n*/\n\n\nfunction sha1(data, resultEncoding) {\n  return createHash('sha1').update(data).digest(resultEncoding);\n}\n/** @arg {string|Buffer} data\n    @arg {string} [resultEncoding = null] - 'hex', 'binary' or 'base64'\n    @return {string|Buffer} - Buffer when resultEncoding is null, or string\n*/\n\n\nfunction sha256(data, resultEncoding) {\n  return createHash('sha256').update(data).digest(resultEncoding);\n}\n/** @arg {string|Buffer} data\n    @arg {string} [resultEncoding = null] - 'hex', 'binary' or 'base64'\n    @return {string|Buffer} - Buffer when resultEncoding is null, or string\n*/\n\n\nfunction sha512(data, resultEncoding) {\n  return createHash('sha512').update(data).digest(resultEncoding);\n}\n\nfunction HmacSHA256(buffer, secret) {\n  return createHmac('sha256', secret).update(buffer).digest();\n}\n\nfunction ripemd160(data) {\n  try {\n    return createHash('rmd160').update(data).digest();\n  } catch (e) {\n    return createHash('ripemd160').update(data).digest();\n  }\n} // function hash160(buffer) {\n//   return ripemd160(sha256(buffer))\n// }\n//\n// function hash256(buffer) {\n//   return sha256(sha256(buffer))\n// }\n//\n// function HmacSHA512(buffer, secret) {\n//   return crypto.createHmac('sha512', secret).update(buffer).digest()\n// }\n\n\nmodule.exports = {\n  sha1: sha1,\n  sha256: sha256,\n  sha512: sha512,\n  HmacSHA256: HmacSHA256,\n  ripemd160: ripemd160 // hash160: hash160,\n  // hash256: hash256,\n  // HmacSHA512: HmacSHA512\n\n};","import { SessionError } from './errors';\nimport { abiEncode, sealMessage } from './utils';\n/**\n * Type describing a link session that can create a eosjs compatible\n * signature provider and transact for a specific auth.\n */\nexport class LinkSession {\n    /** Restore a previously serialized session. */\n    static restore(link, data) {\n        switch (data.type) {\n            case 'channel':\n                return new LinkChannelSession(link, data.data, data.metadata);\n            case 'fallback':\n                return new LinkFallbackSession(link, data.data, data.metadata);\n            default:\n                throw new Error('Unable to restore, session data invalid');\n        }\n    }\n}\n/**\n * Link session that pushes requests over a channel.\n * @internal\n */\nexport class LinkChannelSession extends LinkSession {\n    constructor(link, data, metadata) {\n        super();\n        this.type = 'channel';\n        this.timeout = 2 * 60 * 1000; // ms\n        this.link = link;\n        this.auth = data.auth;\n        this.publicKey = data.publicKey;\n        this.channel = data.channel;\n        this.encrypt = (request) => {\n            return sealMessage(request.encode(true, false), data.requestKey, data.channel.key);\n        };\n        this.metadata = {\n            ...(metadata || {}),\n            timeout: this.timeout,\n            name: this.channel.name,\n        };\n        this.serialize = () => ({\n            type: 'channel',\n            data,\n            metadata: this.metadata,\n        });\n    }\n    onSuccess(request, result) {\n        if (this.link.transport.onSuccess) {\n            this.link.transport.onSuccess(request, result);\n        }\n    }\n    onFailure(request, error) {\n        if (this.link.transport.onFailure) {\n            this.link.transport.onFailure(request, error);\n        }\n    }\n    onRequest(request, cancel) {\n        const info = {\n            expiration: new Date(Date.now() + this.timeout).toISOString().slice(0, -1),\n        };\n        if (this.link.transport.onSessionRequest) {\n            this.link.transport.onSessionRequest(this, request, cancel);\n        }\n        setTimeout(() => {\n            cancel(new SessionError('Wallet did not respond in time', 'E_TIMEOUT'));\n        }, this.timeout + 500);\n        request.data.info.push({\n            key: 'link',\n            value: abiEncode(info, 'link_info'),\n        });\n        this.link.rpc\n            .fetchBuiltin(this.channel.url, {\n            method: 'POST',\n            headers: {\n                'X-Buoy-Wait': (this.timeout / 1000).toFixed(0),\n            },\n            body: this.encrypt(request),\n        })\n            .then((response) => {\n            if (response.status !== 200) {\n                cancel(new SessionError('Unable to push message', 'E_DELIVERY'));\n            }\n            else {\n                // request delivered\n            }\n        })\n            .catch((error) => {\n            cancel(new SessionError(`Unable to reach link service (${error.message || String(error)})`, 'E_DELIVERY'));\n        });\n    }\n    makeSignatureProvider() {\n        return this.link.makeSignatureProvider([this.publicKey], this);\n    }\n    makeAuthorityProvider() {\n        return this.link.makeAuthorityProvider();\n    }\n    transact(args) {\n        return this.link.transact(args, this);\n    }\n}\n/**\n * Link session that sends every request over the transport.\n * @internal\n */\nexport class LinkFallbackSession extends LinkSession {\n    constructor(link, data, metadata) {\n        super();\n        this.type = 'fallback';\n        this.link = link;\n        this.auth = data.auth;\n        this.publicKey = data.publicKey;\n        this.metadata = metadata || {};\n        this.serialize = () => ({\n            type: this.type,\n            data,\n            metadata: this.metadata,\n        });\n    }\n    onSuccess(request, result) {\n        if (this.link.transport.onSuccess) {\n            this.link.transport.onSuccess(request, result);\n        }\n    }\n    onFailure(request, error) {\n        if (this.link.transport.onFailure) {\n            this.link.transport.onFailure(request, error);\n        }\n    }\n    onRequest(request, cancel) {\n        if (this.link.transport.onSessionRequest) {\n            this.link.transport.onSessionRequest(this, request, cancel);\n        }\n        else {\n            this.link.transport.onRequest(request, cancel);\n        }\n    }\n    makeSignatureProvider() {\n        return this.link.makeSignatureProvider([this.publicKey], this);\n    }\n    makeAuthorityProvider() {\n        return this.link.makeAuthorityProvider();\n    }\n    transact(args) {\n        return this.link.transact(args, this);\n    }\n}\n//# sourceMappingURL=link-session.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar assert = require('assert');\n\nvar ecurve = require('ecurve');\n\nvar BigInteger = require('bigi');\n\nvar secp256k1 = ecurve.getCurveByName('secp256k1');\n\nvar hash = require('./hash');\n\nvar keyUtils = require('./key_utils');\n\nvar G = secp256k1.G;\nvar n = secp256k1.n;\nmodule.exports = PublicKey;\n/**\n  @param {string|Buffer|PublicKey|ecurve.Point} public key\n  @param {string} [pubkey_prefix = 'EOS']\n*/\n\nfunction PublicKey(Q) {\n  var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n\n  if (typeof Q === 'string') {\n    var publicKey = PublicKey.fromString(Q, pubkey_prefix);\n    assert(publicKey != null, 'Invalid public key');\n    return publicKey;\n  } else if (Buffer.isBuffer(Q)) {\n    return PublicKey.fromBuffer(Q);\n  } else if ((0, _typeof2[\"default\"])(Q) === 'object' && Q.Q) {\n    return PublicKey(Q.Q);\n  }\n\n  assert.equal((0, _typeof2[\"default\"])(Q), 'object', 'Invalid public key');\n  assert.equal((0, _typeof2[\"default\"])(Q.compressed), 'boolean', 'Invalid public key');\n\n  function toBuffer() {\n    var compressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Q.compressed;\n    return Q.getEncoded(compressed);\n  }\n\n  var pubdata; // cache\n  // /**\n  //     @todo secp224r1\n  //     @return {string} PUB_K1_base58pubkey..\n  // */\n  // function toString() {\n  //     if(pubdata) {\n  //         return pubdata\n  //     }\n  //     pubdata = `PUB_K1_` + keyUtils.checkEncode(toBuffer(), 'K1')\n  //     return pubdata;\n  // }\n\n  /** @todo rename to toStringLegacy\n   * @arg {string} [pubkey_prefix = 'EOS'] - public key prefix\n  */\n\n  function toString() {\n    var pubkey_prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'EOS';\n    return pubkey_prefix + keyUtils.checkEncode(toBuffer());\n  }\n\n  function toUncompressed() {\n    var buf = Q.getEncoded(false);\n    var point = ecurve.Point.decodeFrom(secp256k1, buf);\n    return PublicKey.fromPoint(point);\n  }\n  /** @deprecated */\n\n\n  function child(offset) {\n    console.error('Deprecated warning: PublicKey.child');\n    assert(Buffer.isBuffer(offset), \"Buffer required: offset\");\n    assert.equal(offset.length, 32, \"offset length\");\n    offset = Buffer.concat([toBuffer(), offset]);\n    offset = hash.sha256(offset);\n    var c = BigInteger.fromBuffer(offset);\n    if (c.compareTo(n) >= 0) throw new Error(\"Child offset went out of bounds, try again\");\n    var cG = G.multiply(c);\n    var Qprime = Q.add(cG);\n    if (secp256k1.isInfinity(Qprime)) throw new Error(\"Child offset derived to an invalid key, try again\");\n    return PublicKey.fromPoint(Qprime);\n  }\n\n  function toHex() {\n    return toBuffer().toString('hex');\n  }\n\n  return {\n    Q: Q,\n    toString: toString,\n    // toStringLegacy,\n    toUncompressed: toUncompressed,\n    toBuffer: toBuffer,\n    child: child,\n    toHex: toHex\n  };\n}\n/**\n  @param {string|Buffer|PublicKey|ecurve.Point} pubkey - public key\n  @param {string} [pubkey_prefix = 'EOS']\n*/\n\n\nPublicKey.isValid = function (pubkey) {\n  var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n\n  try {\n    PublicKey(pubkey, pubkey_prefix);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nPublicKey.fromBinary = function (bin) {\n  return PublicKey.fromBuffer(new Buffer(bin, 'binary'));\n};\n\nPublicKey.fromBuffer = function (buffer) {\n  return PublicKey(ecurve.Point.decodeFrom(secp256k1, buffer));\n};\n\nPublicKey.fromPoint = function (point) {\n  return PublicKey(point);\n};\n/**\n    @arg {string} public_key - like PUB_K1_base58pubkey..\n    @arg {string} [pubkey_prefix = 'EOS'] - public key prefix\n    @return PublicKey or `null` (invalid)\n*/\n\n\nPublicKey.fromString = function (public_key) {\n  var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n\n  try {\n    return PublicKey.fromStringOrThrow(public_key, pubkey_prefix);\n  } catch (e) {\n    return null;\n  }\n};\n/**\n    @arg {string} public_key - like PUB_K1_base58pubkey..\n    @arg {string} [pubkey_prefix = 'EOS'] - public key prefix\n\n    @throws {Error} if public key is invalid\n\n    @return PublicKey\n*/\n\n\nPublicKey.fromStringOrThrow = function (public_key) {\n  var pubkey_prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'EOS';\n  assert.equal((0, _typeof2[\"default\"])(public_key), 'string', 'public_key');\n  var match = public_key.match(/^PUB_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);\n\n  if (match === null) {\n    // legacy\n    var prefix_match = new RegExp(\"^\" + pubkey_prefix);\n\n    if (prefix_match.test(public_key)) {\n      public_key = public_key.substring(pubkey_prefix.length);\n    }\n\n    return PublicKey.fromBuffer(keyUtils.checkDecode(public_key));\n  }\n\n  assert(match.length === 3, 'Expecting public key like: PUB_K1_base58pubkey..');\n\n  var _match = (0, _slicedToArray2[\"default\"])(match, 3),\n      keyType = _match[1],\n      keyString = _match[2];\n\n  assert.equal(keyType, 'K1', 'K1 private key expected');\n  return PublicKey.fromBuffer(keyUtils.checkDecode(keyString, keyType));\n};\n\nPublicKey.fromHex = function (hex) {\n  return PublicKey.fromBuffer(new Buffer(hex, 'hex'));\n};\n\nPublicKey.fromStringHex = function (hex) {\n  return PublicKey.fromString(new Buffer(hex, 'hex'));\n};","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar base58 = require('bs58');\n\nvar assert = require('assert');\n\nvar randomBytes = require('randombytes');\n\nvar hash = require('./hash');\n\nmodule.exports = {\n  random32ByteBuffer: random32ByteBuffer,\n  addEntropy: addEntropy,\n  cpuEntropy: cpuEntropy,\n  entropyCount: function entropyCount() {\n    return _entropyCount;\n  },\n  checkDecode: checkDecode,\n  checkEncode: checkEncode\n};\nvar entropyPos = 0,\n    _entropyCount = 0;\nvar externalEntropyArray = randomBytes(101);\n/**\n    Additional forms of entropy are used.  A week random number generator can run out of entropy.  This should ensure even the worst random number implementation will be reasonably safe.\n\n    @arg {number} [cpuEntropyBits = 0] generate entropy on the fly.  This is\n    not required, entropy can be added in advanced via addEntropy or initialize().\n\n    @arg {boolean} [safe = true] false for testing, otherwise this will be\n    true to ensure initialize() was called.\n\n    @return a random buffer obtained from the secure random number generator.  Additional entropy is used.\n*/\n\nfunction random32ByteBuffer() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$cpuEntropyBits = _ref.cpuEntropyBits,\n      cpuEntropyBits = _ref$cpuEntropyBits === void 0 ? 0 : _ref$cpuEntropyBits,\n      _ref$safe = _ref.safe,\n      safe = _ref$safe === void 0 ? true : _ref$safe;\n\n  assert.equal((0, _typeof2[\"default\"])(cpuEntropyBits), 'number', 'cpuEntropyBits');\n  assert.equal((0, _typeof2[\"default\"])(safe), 'boolean', 'boolean');\n\n  if (safe) {\n    assert(_entropyCount >= 128, 'Call initialize() to add entropy');\n  } // if(entropyCount > 0) {\n  //     console.log(`Additional private key entropy: ${entropyCount} events`)\n  // }\n\n\n  var hash_array = [];\n  hash_array.push(randomBytes(32));\n  hash_array.push(Buffer.from(cpuEntropy(cpuEntropyBits)));\n  hash_array.push(externalEntropyArray);\n  hash_array.push(browserEntropy());\n  return hash.sha256(Buffer.concat(hash_array));\n}\n/**\n    Adds entropy.  This may be called many times while the amount of data saved\n    is accumulatively reduced to 101 integers.  Data is retained in RAM for the\n    life of this module.\n\n    @example React <code>\n    componentDidMount() {\n        this.refs.MyComponent.addEventListener(\"mousemove\", this.onEntropyEvent, {capture: false, passive: true})\n    }\n    componentWillUnmount() {\n        this.refs.MyComponent.removeEventListener(\"mousemove\", this.onEntropyEvent);\n    }\n    onEntropyEvent = (e) => {\n        if(e.type === 'mousemove')\n            key_utils.addEntropy(e.pageX, e.pageY, e.screenX, e.screenY)\n        else\n            console.log('onEntropyEvent Unknown', e.type, e)\n    }\n    </code>\n*/\n\n\nfunction addEntropy() {\n  assert.equal(externalEntropyArray.length, 101, 'externalEntropyArray');\n\n  for (var _len = arguments.length, ints = new Array(_len), _key = 0; _key < _len; _key++) {\n    ints[_key] = arguments[_key];\n  }\n\n  _entropyCount += ints.length;\n\n  for (var _i = 0, _ints = ints; _i < _ints.length; _i++) {\n    var i = _ints[_i];\n    var pos = entropyPos++ % 101;\n    var i2 = externalEntropyArray[pos] += i;\n    if (i2 > 9007199254740991) externalEntropyArray[pos] = 0;\n  }\n}\n/**\n    This runs in just under 1 second and ensures a minimum of cpuEntropyBits\n    bits of entropy are gathered.\n\n    Based on more-entropy. @see https://github.com/keybase/more-entropy/blob/master/src/generator.iced\n\n    @arg {number} [cpuEntropyBits = 128]\n    @return {array} counts gathered by measuring variations in the CPU speed during floating point operations.\n*/\n\n\nfunction cpuEntropy() {\n  var cpuEntropyBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 128;\n  var collected = [];\n  var lastCount = null;\n  var lowEntropySamples = 0;\n\n  while (collected.length < cpuEntropyBits) {\n    var count = floatingPointCount();\n\n    if (lastCount != null) {\n      var delta = count - lastCount;\n\n      if (Math.abs(delta) < 1) {\n        lowEntropySamples++;\n        continue;\n      } // how many bits of entropy were in this sample\n\n\n      var bits = Math.floor(log2(Math.abs(delta)) + 1);\n\n      if (bits < 4) {\n        if (bits < 2) {\n          lowEntropySamples++;\n        }\n\n        continue;\n      }\n\n      collected.push(delta);\n    }\n\n    lastCount = count;\n  }\n\n  if (lowEntropySamples > 10) {\n    var pct = Number(lowEntropySamples / cpuEntropyBits * 100).toFixed(2); // Is this algorithm getting inefficient?\n\n    console.warn(\"WARN: \".concat(pct, \"% low CPU entropy re-sampled\"));\n  }\n\n  return collected;\n}\n/**\n    @private\n    Count while performing floating point operations during a fixed time\n    (7 ms for example).  Using a fixed time makes this algorithm\n    predictable in runtime.\n*/\n\n\nfunction floatingPointCount() {\n  var workMinMs = 7;\n  var d = Date.now();\n  var i = 0,\n      x = 0;\n\n  while (Date.now() < d + workMinMs + 1) {\n    x = Math.sin(Math.sqrt(Math.log(++i + x)));\n  }\n\n  return i;\n}\n\nvar log2 = function log2(x) {\n  return Math.log(x) / Math.LN2;\n};\n/**\n    @private\n    Attempt to gather and hash information from the browser's window, history, and supported mime types.  For non-browser environments this simply includes secure random data.  In any event, the information is re-hashed in a loop for 25 milliseconds seconds.\n\n    @return {Buffer} 32 bytes\n*/\n\n\nfunction browserEntropy() {\n  var entropyStr = Array(randomBytes(101)).join();\n\n  try {\n    entropyStr += new Date().toString() + \" \" + window.screen.height + \" \" + window.screen.width + \" \" + window.screen.colorDepth + \" \" + \" \" + window.screen.availHeight + \" \" + window.screen.availWidth + \" \" + window.screen.pixelDepth + navigator.language + \" \" + window.location + \" \" + window.history.length;\n\n    for (var i = 0, mimeType; i < navigator.mimeTypes.length; i++) {\n      mimeType = navigator.mimeTypes[i];\n      entropyStr += mimeType.description + \" \" + mimeType.type + \" \" + mimeType.suffixes + \" \";\n    }\n  } catch (error) {\n    //nodejs:ReferenceError: window is not defined\n    entropyStr += hash.sha256(new Date().toString());\n  }\n\n  var b = new Buffer(entropyStr);\n  entropyStr += b.toString('binary') + \" \" + new Date().toString();\n  var entropy = entropyStr;\n  var start_t = Date.now();\n\n  while (Date.now() - start_t < 25) {\n    entropy = hash.sha256(entropy);\n  }\n\n  return entropy;\n}\n/**\n  @arg {Buffer} keyBuffer data\n  @arg {string} keyType = sha256x2, K1, etc\n  @return {string} checksum encoded base58 string\n*/\n\n\nfunction checkEncode(keyBuffer) {\n  var keyType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  assert(Buffer.isBuffer(keyBuffer), 'expecting keyBuffer<Buffer>');\n\n  if (keyType === 'sha256x2') {\n    // legacy\n    var checksum = hash.sha256(hash.sha256(keyBuffer)).slice(0, 4);\n    return base58.encode(Buffer.concat([keyBuffer, checksum]));\n  } else {\n    var check = [keyBuffer];\n\n    if (keyType) {\n      check.push(Buffer.from(keyType));\n    }\n\n    var _checksum = hash.ripemd160(Buffer.concat(check)).slice(0, 4);\n\n    return base58.encode(Buffer.concat([keyBuffer, _checksum]));\n  }\n}\n/**\n  @arg {Buffer} keyString data\n  @arg {string} keyType = sha256x2, K1, etc\n  @return {string} checksum encoded base58 string\n*/\n\n\nfunction checkDecode(keyString) {\n  var keyType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  assert(keyString != null, 'private key expected');\n  var buffer = new Buffer(base58.decode(keyString));\n  var checksum = buffer.slice(-4);\n  var key = buffer.slice(0, -4);\n  var newCheck;\n\n  if (keyType === 'sha256x2') {\n    // legacy\n    newCheck = hash.sha256(hash.sha256(key)).slice(0, 4); // WIF (legacy)\n  } else {\n    var check = [key];\n\n    if (keyType) {\n      check.push(Buffer.from(keyType));\n    }\n\n    newCheck = hash.ripemd160(Buffer.concat(check)).slice(0, 4); //PVT\n  }\n\n  if (checksum.toString('hex') !== newCheck.toString('hex')) {\n    throw new Error('Invalid checksum, ' + \"\".concat(checksum.toString('hex'), \" != \").concat(newCheck.toString('hex')));\n  }\n\n  return key;\n}"],"sourceRoot":""}